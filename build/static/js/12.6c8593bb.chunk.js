(this["webpackJsonpretrack-admin"]=this["webpackJsonpretrack-admin"]||[]).push([[12],{509:function(e,t,a){"use strict";a.r(t);a(488);var c=a(490),n=(a(153),a(105)),s=(a(215),a(156)),i=(a(409),a(410)),o=(a(130),a(61)),r=a(4),l=(a(132),a(43)),u=(a(213),a(131)),j=a(422),f=a(104),d=(a(152),a(106)),b=a(0),O=a(91),h=a.n(O),p=a(37),g=(a(432),a(430)),m=(a(407),a(408)),x=(a(92),a(49)),v=(a(426),a(157)),S=(a(151),a(51)),C=a(510);var k=function(e){var t=Object(b.useState)({}),a=Object(f.a)(t,2),c=(a[0],a[1],Object(b.useState)(!1)),n=Object(f.a)(c,2),s=(n[0],n[1],Object(b.useState)("Choose file")),i=Object(f.a)(s,2),l=(i[0],i[1]),j=Object(b.useState)(""),d=Object(f.a)(j,2),O=d[0],k=d[1],y=Object(b.useState)("none"),w=Object(f.a)(y,2),I=w[0],F=w[1],P=Object(b.useState)(""),N=Object(f.a)(P,2),T=(N[0],N[1],Object(b.useState)([])),R=Object(f.a)(T,2),_=(R[0],R[1],Object(b.useState)([])),z=Object(f.a)(_,2),L=(z[0],z[1],Object(b.useState)(!1)),U=Object(f.a)(L,2),E=(U[0],U[1]),J=Object(b.useState)(!1),A=Object(f.a)(J,2),B=A[0],W=A[1],q=S.a.useForm(),D=(Object(f.a)(q,1)[0],Object(b.useState)(!1)),G=Object(f.a)(D,2),H=G[0],K=G[1],M=function(){E(!0),e.afterClosing(),setTimeout((function(){W(!1),K(!1)}),500)},Q={name:"file",action:"/api/v1/funfacts/add_funfacts",headers:{authorization:"authorization-text"},onChange:function(e){"uploading"!==e.file.status&&console.log("uploading",e.file,e.fileList),"done"===e.file.status?v.b.success("".concat(e.file.name," file uploaded Successfully.")):"error"===e.file.status&&v.b.error("".concat(e.file.name," file upload Failed.")),F(e.file.status),l(e)}};return Object(r.jsxs)("div",{children:[Object(r.jsxs)(x.a,{type:"primary",className:"modal-button-upload",onClick:function(){k(),F("removed"),l("Choose file"),W(!0),console.log(e.info)},children:[Object(r.jsxs)("span",{className:"desktop-view",children:[Object(r.jsx)(C.a,{})," Add Funfacts"]}),Object(r.jsx)("span",{className:"mobile-view",children:Object(r.jsx)(C.a,{})})]}),Object(r.jsx)(u.a,{title:"Fun Facts Upload",confirmLoading:H,visible:B,onOk:function(t){"done"==I?h.a.post("/api/v1/images/save_image",{imageOwnerId:e.info.id,imageReferenceId:1,imagePath:O}).then((function(e){v.b.success("Successfully Saved"),setTimeout((function(){W(!1),K(!1)}),500),k("")})).catch((function(e){return console.log(e)})):v.b.error("Image Saving Error")},onCancel:M,afterClose:function(){K(!0),E(!1),e.afterClosing()},destroyOnClose:!0,footer:[Object(r.jsx)(x.a,{className:"modal-button",type:"danger",onClick:M,children:"Close"},"back")],children:Object(r.jsx)(o.a,{children:Object(r.jsx)(m.b,{style:{width:"100%"},size:"large",children:Object(r.jsx)(g.a,Object(p.a)(Object(p.a)({},Q),{},{onRemove:function(e){h.a.delete("/api/v1/funfacts/delete_funfacts",{params:{fileName:e.response.lgImagePath,fileId:e.response.id}}).then((function(e){F("removed")})).catch((function(e){return console.log(e)})),k(),v.b.error("File removed Successfully.")},listType:"picture-card",showUploadList:{showPreviewIcon:!1},maxCount:5,children:Object(r.jsxs)(m.b,{children:[Object(r.jsx)(C.a,{}),"Upload"]})}))})})})]})},y=a(511),w=a(512),I=a(513);t.default=function(){var e=d.a.Title,t=Object(b.useState)([]),a=Object(f.a)(t,2),O=a[0],p=a[1],g=Object(b.useRef)(),m=function(){return g.current.prev()},x=function(){return g.current.next()};return Object(b.useEffect)((function(){h.a.get("/api/v1/funfacts/").then((function(e){var t=e.data;p(t),console.log(t)})).catch((function(e){return console.log(e)}))}),[]),Object(r.jsxs)("div",{children:[Object(r.jsxs)(o.a,{children:[Object(r.jsx)(l.a,{span:20}),Object(r.jsx)(l.a,{span:4,children:Object(r.jsx)(k,{afterClosing:function(){h.a.get("/api/v1/funfacts/").then((function(e){var t=e.data;p(t)}))}})})]}),Object(r.jsx)(i.a,{children:Object(r.jsx)(e,{level:4,children:"Fun Facts"})}),Object(r.jsx)(o.a,{children:Object(r.jsx)(l.a,{span:24,align:"center",children:Object(r.jsx)(c.a,{ref:g,style:{maxWidth:"350px"},swipeToSlide:!0,dots:!1,draggable:!0,children:O.map((function(e,t){return Object(r.jsx)(o.a,{children:Object(r.jsx)(l.a,{span:24,children:Object(r.jsx)(n.a,{style:{width:350},cover:Object(r.jsx)(s.a,{src:"/api/v1/funfacts/".concat(e.lgImagePath?e.lgImagePath:"logo.png")}),actions:[Object(r.jsx)(y.a,{onClick:m}),Object(r.jsx)(w.a,{onClick:function(){return t=e.id,a=e.lgImagePath,void h.a.delete("/api/v1/funfacts/delete_funfacts",{params:{fileName:a,fileId:t}}).then((function(e){var a=Object(j.a)(O);a=a.filter((function(e){return e.id!==t})),p(a),u.a.success({content:"Fun fact image has been removed",okButtonProps:{style:{borderRadius:"50px"}}})})).catch((function(e){return console.log(e)}));var t,a},danger:!0}),Object(r.jsx)(I.a,{onClick:x})]})},t)})}))})})})]})}}}]);
//# sourceMappingURL=12.6c8593bb.chunk.js.map