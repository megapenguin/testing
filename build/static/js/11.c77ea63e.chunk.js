(this["webpackJsonpretrack-admin"]=this["webpackJsonpretrack-admin"]||[]).push([[11],{492:function(e,a,t){"use strict";t.r(a);t(415);var n=t(414),c=(t(407),t(408)),s=(t(130),t(61)),i=t(4),o=(t(133),t(43)),l=(t(409),t(410)),r=t(38),j=(t(152),t(105)),b=(t(132),t(62)),d=t(104),u=t(0),O=t(92),m=t.n(O),p=t(412),f=t.n(p),h=t(413),g=t.n(h),y=(t(153),t(106)),x=(t(214),t(154)),v=(t(91),t(49)),N=t(418),C=(t(213),t(131)),S=t(484);var I=function(e){var a=Object(u.useState)(!1),t=Object(d.a)(a,2),n=t[0],c=t[1],r=Object(u.useState)(!1),j=Object(d.a)(r,2),b=j[0],O=j[1],p=Object(u.useState)(!1),f=Object(d.a)(p,2),h=f[0],g=f[1],I=Object(u.useState)([]),w=Object(d.a)(I,2),k=(w[0],w[1],Object(u.useState)([])),J=Object(d.a)(k,2),P=J[0],F=J[1],_=Object(u.useState)([]),T=Object(d.a)(_,2);return T[0],T[1],Object(i.jsxs)("div",{children:[Object(i.jsx)(l.b,{children:Object(i.jsxs)(v.a,{type:"primary",className:"modal-button-view",onClick:function(){c(!0),m.a.post("/api/v1/images/search_images",{imageOwnerId:e.info.id,imageReferenceId:3}).then((function(e){var a=e.data;F(a)})).catch((function(e){return console.log(e)}))},children:[Object(i.jsxs)("span",{className:"desktop-view",children:[Object(i.jsx)(S.a,{})," View"]}),Object(i.jsx)("span",{className:"mobile-view",children:Object(i.jsx)(S.a,{})})]})}),Object(i.jsxs)(C.a,{title:"Jeepney Information",visible:n,confirmLoading:b,onOk:function(){e.passedData(e.info),O(!0),g(!1),setTimeout((function(){c(!1),O(!1)}),2e3)},onCancel:function(){g(!0),c(!1)},afterClose:function(){h||e.afterClosing()},footer:[Object(i.jsx)(v.a,{className:"modal-button",loading:b,onClick:function(){return e.info.id,O(!0),g(!1),setTimeout((function(){c(!1),O(!1)}),2e3),void C.a.success({content:"Still in development"})},danger:!0,children:"Remove"})],children:[Object(i.jsxs)("p",{children:[Object(i.jsx)("h4",{children:"Barangay Id:"}),e.info.barangayId]}),Object(i.jsxs)("p",{children:[Object(i.jsx)("h4",{children:"Plate Number:"}),e.info.plateNumber]}),Object(i.jsxs)("p",{children:[Object(i.jsx)("h4",{children:"Jeep Capacity:"}),e.info.jeepCapacity]}),Object(i.jsx)("h4",{children:"Uploaded Images: "}),Object(i.jsx)(y.a,{className:"shadow-sm",children:Object(i.jsx)(s.a,{children:P.map((function(e,a){return Object(i.jsxs)(o.a,{md:{span:6},children:[Object(i.jsx)("br",{}),Object(i.jsx)(x.a,{height:100,width:100,src:"/api/v1/images/".concat(e.imagePath?e.imagePath:"logo.png")}),Object(i.jsxs)(s.a,{children:[Object(i.jsx)("br",{}),Object(i.jsx)(v.a,{onClick:function(){return function(e,a){m.a.delete("/api/v1/images/delete_folder_image",{params:{fileName:a,fileId:e}}).then((function(a){var t=Object(N.a)(P);t=t.filter((function(a){return a.id!==e})),F(t),C.a.success({content:"Jeepney image has been removed"})})).catch((function(e){return console.log(e)}))}(e.id,e.imagePath)},danger:!0,children:"Delete"})]})]},a)}))})})]})]})},w=(t(151),t(51)),k=(t(420),t(417)),J=t(494);var P=function(e){var a=Object(u.useState)(!1),t=Object(d.a)(a,2),n=t[0],c=t[1],s=Object(u.useState)(!1),o=Object(d.a)(s,2),l=o[0],r=o[1],j=Object(u.useState)(!1),O=Object(d.a)(j,2),p=O[0],f=O[1],h=Object(u.useState)([]),g=Object(d.a)(h,2),y=g[0],x=g[1],S=Object(u.useState)({}),I=Object(d.a)(S,2),P=(I[0],I[1],Object(u.useState)("Choose file")),F=Object(d.a)(P,2),_=(F[0],F[1],Object(u.useState)()),T=Object(d.a)(_,2),A=T[0],B=(T[1],Object(u.useState)([])),D=Object(d.a)(B,2),U=D[0],L=D[1];Object(u.useEffect)((function(){m.a.get("/api/v1/barangays/search_all_barangays").then((function(e){var a=e.data;L(a)})).catch((function(e){return console.log(e)}))}),[]);var R=k.a.Option,q=function(){f(!0),c(!1)},V=function(a){console.log(a),e.passedData(e.info),r(!0),f(!1),setTimeout((function(){c(!1),r(!1)}),2e3),m.a.post("/api/v1/jeepneys/add_jeep",a).then((function(e){var a=Object(N.a)(y);a=[].concat(Object(N.a)(a),[e.data]),console.log(a),x(a),C.a.success({content:"Successfully Added New Jeepney"}),m.a.post("/api/v1/images/save_image",{imageOwnerId:e.data.id,imageReferenceId:3,imagePath:A})})).catch((function(e){return console.log(e)}))};return Object(i.jsxs)("div",{children:[Object(i.jsxs)(v.a,{type:"primary",className:"modal-button-add",onClick:function(){c(!0),console.log(e.info)},children:[Object(i.jsxs)("span",{className:"desktop-view",children:[Object(i.jsx)(J.a,{})," Add Jeepney"]}),Object(i.jsx)("span",{className:"mobile-view",children:Object(i.jsx)(J.a,{})})]}),Object(i.jsx)(C.a,{title:"Add Jeepney:",visible:n,confirmLoading:l,onOk:V,onCancel:q,afterClose:function(){p||e.afterClosing()},destroyOnClose:!0,footer:[Object(i.jsx)(v.a,{className:"modal-button",onClick:q,children:"Cancel"},"back"),Object(i.jsx)(v.a,{form:"myForm",className:"modal-button",htmlType:"submit",type:"primary",loading:l,onClick:V,children:"Add"},"submit")],children:Object(i.jsxs)(w.a,{layout:"vertical",name:"basic",initialValues:{remember:!0},onFinish:V,onFinishFailed:function(e){C.a.error({content:"Failure to Add New Jeepney"}),setTimeout((function(){c(!0),r(!1)}),2e3),console.log("fail"),console.log("Failed:",e)},id:"myForm",children:[Object(i.jsx)(w.a.Item,{label:"Barangay:",name:"barangayId",rules:[{required:!0,message:"Please input the Barangay's ID!"}],children:Object(i.jsx)(k.a,{placeholder:"Select Barangay",style:{width:"100%"},onChange:function(e){console.log("selected ".concat(e))},children:U.map((function(e,a){return Object(i.jsx)(R,{value:e.id,children:e.barangayName})}))})}),Object(i.jsx)(w.a.Item,{label:"Plate Number:",name:"plateNumber",rules:[{required:!0,message:"Please input the Plate Number!"}],children:Object(i.jsx)(b.a,{})}),Object(i.jsx)(w.a.Item,{label:"Jeep Capacity:",name:"jeepCapacity",rules:[{required:!0,message:"Please input the Jeep Capacity!"}],children:Object(i.jsx)(b.a,{})})]})})]})},F=t(495);var _=function(e){var a=Object(u.useState)(!1),t=Object(d.a)(a,2),n=t[0],c=t[1],s=w.a.useForm(),o=Object(d.a)(s,1)[0],l=Object(u.useState)(!1),r=Object(d.a)(l,2),j=r[0],O=r[1],p=Object(u.useState)(!1),f=Object(d.a)(p,2),h=f[0],g=f[1],y=Object(u.useState)(),x=Object(d.a)(y,2),N=x[0],S=x[1],I=Object(u.useState)([]),J=Object(d.a)(I,2),P=J[0],_=J[1];Object(u.useEffect)((function(){m.a.get("/api/v1/barangays/search_all_barangays").then((function(e){var a=e.data;_(a)})).catch((function(e){return console.log(e)}))}),[]);var T=k.a.Option,A=function(){g(!0),c(!1)},B=function(a){O(!0),g(!1),e.passedData(e.info),m.a.post("/api/v1/jeepneys/update_jeepney",{id:e.info.id,barangayId:a.barangayId,plateNumber:a.plateNumber,jeepCapacity:a.jeepCapacity}).then((function(e){setTimeout((function(){c(!1),O(!1)}),2e3),N?C.a.success({content:"Successfully Updated Jeepney"}):C.a.success({content:"Jeepney Info is up to date"})})).catch((function(e){return console.log(e)}))};return Object(i.jsxs)("div",{children:[Object(i.jsxs)(v.a,{type:"primary",className:"modal-button-edit",onClick:function(){o.setFieldsValue({id:e.info.id,barangayId:e.info.barangayId,plateNumber:e.info.plateNumber,jeepCapacity:e.info.jeepCapacity}),c(!0),S(!1)},children:[Object(i.jsxs)("span",{className:"desktop-view",children:[Object(i.jsx)(F.a,{})," Edit"]}),Object(i.jsx)("span",{className:"mobile-view",children:Object(i.jsx)(F.a,{})})]}),Object(i.jsx)(C.a,{title:"Update Jeepney Info",confirmLoading:j,visible:n,onOk:B,onCancel:A,afterClose:function(){h||e.afterClosing()},destroyOnClose:!0,footer:[Object(i.jsx)(v.a,{className:"modal-button",onClick:A,children:"Cancel"},"back"),Object(i.jsx)(v.a,{form:"myForm",className:"modal-button",htmlType:"submit",type:"primary",children:"Update"})],children:Object(i.jsxs)(w.a,{layout:"vertical",name:"basic",form:o,initialValues:{remember:!0},onFinish:B,onFinishFailed:function(e){C.a.error({content:"Failure to Update Jeepney Info"}),setTimeout((function(){c(!0),O(!1)}),2e3)},onValuesChange:function(e,a){console.log("Changed",a,e),S(!0)},id:"myForm",children:[Object(i.jsx)(w.a.Item,{label:"Barangay:",name:"barangayId",rules:[{required:!0,message:"Please input the Barangay's ID!"}],children:Object(i.jsx)(k.a,{placeholder:"Select Barangay",style:{width:"100%"},onChange:function(e){console.log("selected ".concat(e))},children:P.map((function(e,a){return Object(i.jsx)(T,{value:e.id,children:e.barangayName})}))})}),Object(i.jsx)(w.a.Item,{label:"Plate Number:",name:"plateNumber",rules:[{required:!0,message:"Please input the Plate Number!"}],children:Object(i.jsx)(b.a,{})}),Object(i.jsx)(w.a.Item,{label:"Jeep Capacity:",name:"jeepCapacity",rules:[{required:!0,message:"Please input Jeep Capacity!"}],children:Object(i.jsx)(b.a,{})})]})})]})},T=(t(425),t(424)),A=(t(421),t(426)),B=(t(422),t(156)),D=t(403);var U=function(e){var a=Object(u.useState)({}),t=Object(d.a)(a,2),n=(t[0],t[1],Object(u.useState)(!1)),c=Object(d.a)(n,2),o=(c[0],c[1],Object(u.useState)("Choose file")),j=Object(d.a)(o,2),b=(j[0],j[1]),O=Object(u.useState)(""),p=Object(d.a)(O,2),f=p[0],h=p[1],g=Object(u.useState)("none"),y=Object(d.a)(g,2),x=y[0],N=y[1],S=Object(u.useState)(""),I=Object(d.a)(S,2),k=(I[0],I[1],Object(u.useState)([])),J=Object(d.a)(k,2),P=(J[0],J[1],Object(u.useState)([])),F=Object(d.a)(P,2),_=(F[0],F[1],Object(u.useState)(!1)),U=Object(d.a)(_,2),L=(U[0],U[1]),R=Object(u.useState)(!1),q=Object(d.a)(R,2),V=q[0],E=q[1],z=w.a.useForm(),G=Object(d.a)(z,1)[0],H=Object(u.useState)(!1),K=Object(d.a)(H,2),M=K[0],Q=K[1],W=function(){L(!0),setTimeout((function(){E(!1),Q(!1)}),500)},X={name:"file",action:"/api/v1/images/add_image",headers:{authorization:"authorization-text"},data:{imageOwnerId:e.info.id,imageReferenceId:3},onChange:function(e){"uploading"!==e.file.status&&console.log("uploading",e.file,e.fileList),"done"===e.file.status?B.b.success("".concat(e.file.name," file uploaded Successfully.")):"error"===e.file.status&&B.b.error("".concat(e.file.name," file upload Failed.")),N(e.file.status),b(e)}};return Object(i.jsxs)("div",{children:[Object(i.jsxs)(v.a,{type:"primary",className:"modal-button-upload",onClick:function(){G.setFieldsValue({imageOwnerId:e.info.id,imageReferenceId:3}),h(),N("removed"),b("Choose file"),E(!0),console.log(e.info)},children:[Object(i.jsxs)("span",{className:"desktop-view",children:[Object(i.jsx)(D.a,{})," Upload"]}),Object(i.jsx)("span",{className:"mobile-view",children:Object(i.jsx)(D.a,{})})]}),Object(i.jsxs)(C.a,{title:"Jeepney Image Upload",confirmLoading:M,visible:V,onOk:function(a){"done"==x?m.a.post("/api/v1/images/save_image",{imageOwnerId:e.info.id,imageReferenceId:3,imagePath:f}).then((function(e){B.b.success("Successfully Saved"),setTimeout((function(){E(!1),Q(!1)}),500),h("")})).catch((function(e){return console.log(e)})):B.b.error("Image Saving Error")},onCancel:W,afterClose:function(){Q(!0),L(!1)},destroyOnClose:!0,footer:[Object(i.jsx)(v.a,{className:"modal-button",type:"danger",onClick:W,children:"Close"},"back")],children:[Object(i.jsxs)(A.b,{itemLayout:"vertical",children:[Object(i.jsxs)(A.b.Item,{children:[Object(i.jsx)("h4",{children:"Plate Number: "}),e.info.plateNumber]}),Object(i.jsxs)(A.b.Item,{children:[Object(i.jsx)("h4",{children:"Image Reference Name: "}),"Jeepney"]})]}),Object(i.jsx)(s.a,{children:Object(i.jsx)(l.b,{style:{width:"100%"},size:"large",children:Object(i.jsx)(T.a,Object(r.a)(Object(r.a)({},X),{},{onRemove:function(e){m.a.delete("/api/v1/images/delete_folder_image",{params:{fileName:e.response.imagePath,fileId:e.response.id}}).then((function(e){N("removed")})).catch((function(e){return console.log(e)})),h(),B.b.error("File removed Successfully.")},listType:"picture-card",showUploadList:{showPreviewIcon:!1},maxCount:5,children:Object(i.jsxs)(l.b,{children:[Object(i.jsx)(D.a,{}),"Upload"]})}))})})]})]})};a.default=function(){var e=Object(u.useState)([]),a=Object(d.a)(e,2),t=a[0],O=a[1],p=b.a.Search,h=Object(u.useState)(""),y=Object(d.a)(h,2),x=y[0],v=y[1],N=j.a.Title;Object(u.useEffect)((function(){m.a.get("/api/v1/jeepneys/").then((function(e){var a=e.data;a=a.map((function(e){return null===e.barangay?Object(r.a)(Object(r.a)({},e),{},{barangayName:"None Assigned"}):Object(r.a)(Object(r.a)({},e),{},{barangayName:e.barangay.barangayName})})),O(a)})).catch((function(e){return console.log(e)}))}),[]);var C=function(){console.log("Passed data from modal",x),m.a.get("/api/v1/jeepneys/").then((function(e){var a=e.data;a=a.map((function(e){return null===e.barangay?Object(r.a)(Object(r.a)({},e),{},{barangayName:"None Assigned"}):Object(r.a)(Object(r.a)({},e),{},{barangayName:e.barangay.barangayName})})),O(a)}))};return Object(i.jsxs)("div",{children:[Object(i.jsxs)(s.a,{justify:"space-between",children:[Object(i.jsx)(o.a,{span:4,children:Object(i.jsx)(l.b,{direction:"vertical",children:Object(i.jsx)(p,{placeholder:"Search Jeepney",onSearch:function(e){m.a.post("/api/v1/jeepneys/search_jeepneys",{value:e}).then((function(e){console.log(e);var a=e.data;a=a.map((function(e){return null===e.barangay?Object(r.a)(Object(r.a)({},e),{},{barangayName:"None Assigned"}):Object(r.a)(Object(r.a)({},e),{},{barangayName:e.barangay.barangayName})})),O(a),console.log("success")})),console.log(e)},allowClear:!0,enterButton:!0})})}),Object(i.jsx)(o.a,{span:4,children:Object(i.jsx)(P,{info:"",passedData:v,afterClosing:C})})]}),Object(i.jsx)(c.a,{children:Object(i.jsx)(N,{level:4,children:"List of Jeepneys"})}),Object(i.jsx)(s.a,{children:Object(i.jsxs)(n.a,{dataSource:t,scroll:{x:1e3,y:500},sticky:!0,children:[Object(i.jsx)(f.a,{title:"Barangay",dataIndex:"barangayName"},"barangayId"),Object(i.jsx)(g.a,{title:"Plate Number",dataIndex:"plateNumber"},"plateNumber"),Object(i.jsx)(g.a,{title:"Jeep Capacity",dataIndex:"jeepCapacity"},"jeepCapacity"),Object(i.jsx)(g.a,{title:"Actions",fixed:"right",width:"35vh",render:function(e){return Object(i.jsxs)(l.b,{children:[Object(i.jsx)(I,{info:e,passedData:v,afterClosing:C}),Object(i.jsx)(_,{info:e,passedData:v,afterClosing:C}),Object(i.jsx)(U,{info:e})]})}},"actions")]})})]})}}}]);
//# sourceMappingURL=11.c77ea63e.chunk.js.map