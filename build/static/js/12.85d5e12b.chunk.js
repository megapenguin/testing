(this["webpackJsonpretrack-admin"]=this["webpackJsonpretrack-admin"]||[]).push([[12],{509:function(e,t,a){"use strict";a.r(t);a(488);var c=a(490),n=(a(130),a(61)),s=a(4),i=(a(133),a(43)),o=(a(215),a(156)),l=(a(409),a(410)),r=(a(213),a(131)),u=a(422),j=a(104),f=(a(152),a(105)),b=a(0),d=a(91),O=a.n(d),h=a(37),p=(a(432),a(430)),g=(a(407),a(408)),m=(a(92),a(49)),x=(a(426),a(157)),v=(a(151),a(51)),S=a(403);var C=function(e){var t=Object(b.useState)({}),a=Object(j.a)(t,2),c=(a[0],a[1],Object(b.useState)(!1)),i=Object(j.a)(c,2),o=(i[0],i[1],Object(b.useState)("Choose file")),l=Object(j.a)(o,2),u=(l[0],l[1]),f=Object(b.useState)(""),d=Object(j.a)(f,2),C=d[0],k=d[1],w=Object(b.useState)("none"),y=Object(j.a)(w,2),I=y[0],F=y[1],N=Object(b.useState)(""),P=Object(j.a)(N,2),T=(P[0],P[1],Object(b.useState)([])),_=Object(j.a)(T,2),z=(_[0],_[1],Object(b.useState)([])),L=Object(j.a)(z,2),R=(L[0],L[1],Object(b.useState)(!1)),U=Object(j.a)(R,2),E=(U[0],U[1]),J=Object(b.useState)(!1),A=Object(j.a)(J,2),H=A[0],q=A[1],B=v.a.useForm(),D=(Object(j.a)(B,1)[0],Object(b.useState)(!1)),G=Object(j.a)(D,2),K=G[0],M=G[1],Q=function(){E(!0),e.afterClosing(),setTimeout((function(){q(!1),M(!1)}),500)},V={name:"file",action:"/api/v1/funfacts/add_funfacts",headers:{authorization:"authorization-text"},onChange:function(e){"uploading"!==e.file.status&&console.log("uploading",e.file,e.fileList),"done"===e.file.status?x.b.success("".concat(e.file.name," file uploaded Successfully.")):"error"===e.file.status&&x.b.error("".concat(e.file.name," file upload Failed.")),F(e.file.status),u(e)}};return Object(s.jsxs)("div",{children:[Object(s.jsxs)(m.a,{type:"primary",className:"modal-button-upload",onClick:function(){k(),F("removed"),u("Choose file"),q(!0),console.log(e.info)},children:[Object(s.jsxs)("span",{className:"desktop-view",children:[Object(s.jsx)(S.a,{})," Add Funfacts"]}),Object(s.jsx)("span",{className:"mobile-view",children:Object(s.jsx)(S.a,{})})]}),Object(s.jsx)(r.a,{title:"Fun Facts Upload",confirmLoading:K,visible:H,onOk:function(t){"done"==I?O.a.post("/api/v1/images/save_image",{imageOwnerId:e.info.id,imageReferenceId:1,imagePath:C}).then((function(e){x.b.success("Successfully Saved"),setTimeout((function(){q(!1),M(!1)}),500),k("")})).catch((function(e){return console.log(e)})):x.b.error("Image Saving Error")},onCancel:Q,afterClose:function(){M(!0),E(!1),e.afterClosing()},destroyOnClose:!0,footer:[Object(s.jsx)(m.a,{className:"modal-button",type:"danger",onClick:Q,children:"Close"},"back")],children:Object(s.jsx)(n.a,{children:Object(s.jsx)(g.b,{style:{width:"100%"},size:"large",children:Object(s.jsx)(p.a,Object(h.a)(Object(h.a)({},V),{},{onRemove:function(e){O.a.delete("/api/v1/funfacts/delete_funfacts",{params:{fileName:e.response.lgImagePath,fileId:e.response.id}}).then((function(e){F("removed")})).catch((function(e){return console.log(e)})),k(),x.b.error("File removed Successfully.")},listType:"picture-card",showUploadList:{showPreviewIcon:!1},maxCount:5,children:Object(s.jsxs)(g.b,{children:[Object(s.jsx)(S.a,{}),"Upload"]})}))})})})]})},k=a(510),w=a(511),y=a(512);t.default=function(){var e=f.a.Title,t=Object(b.useState)([]),a=Object(j.a)(t,2),d=a[0],h=a[1],p=Object(b.useRef)(),g=function(){return p.current.prev()},m=function(){return p.current.next()},x={height:"400px",lineHeight:"160px",width:"500px"};return Object(b.useEffect)((function(){O.a.get("/api/v1/funfacts/").then((function(e){var t=e.data;h(t),console.log(t)})).catch((function(e){return console.log(e)}))}),[]),Object(s.jsxs)("div",{children:[Object(s.jsx)(l.a,{children:Object(s.jsx)(e,{level:4,children:"Fun Facts"})}),Object(s.jsx)(C,{afterClosing:function(){O.a.get("/api/v1/funfacts/").then((function(e){var t=e.data;h(t)}))}}),Object(s.jsx)(c.a,{ref:p,style:{},swipeToSlide:!0,draggable:!0,children:d.map((function(e,t){return Object(s.jsxs)(i.a,{span:24,children:[Object(s.jsx)(o.a,{style:x,src:"/api/v1/funfacts/".concat(e.lgImagePath?e.lgImagePath:"logo.png")}),Object(s.jsxs)(i.a,{children:[Object(s.jsxs)(n.a,{children:[Object(s.jsx)(i.a,{span:12,children:Object(s.jsx)(k.a,{onClick:g})}),Object(s.jsx)(i.a,{span:12,children:Object(s.jsx)(w.a,{onClick:m})})]}),Object(s.jsx)(y.a,{onClick:function(){return t=e.id,a=e.lgImagePath,void O.a.delete("/api/v1/funfacts/delete_funfacts",{params:{fileName:a,fileId:t}}).then((function(e){var a=Object(u.a)(d);a=a.filter((function(e){return e.id!==t})),h(a),r.a.success({content:"Fun fact image has been removed"})})).catch((function(e){return console.log(e)}));var t,a},danger:!0})]})]},t)}))})]})}}}]);
//# sourceMappingURL=12.85d5e12b.chunk.js.map