(this["webpackJsonpretrack-admin"]=this["webpackJsonpretrack-admin"]||[]).push([[10],{491:function(e,t,a){"use strict";a.r(t);a(415);var s=a(414),i=(a(407),a(408)),c=(a(130),a(61)),n=a(4),r=(a(133),a(43)),l=(a(409),a(410)),o=(a(152),a(105)),d=(a(132),a(62)),j=a(104),b=a(0),m=a(92),u=a.n(m),O=a(412),f=a.n(O),h=a(413),x=a.n(h),p=(a(153),a(106)),v=(a(214),a(154)),g=(a(91),a(49)),N=a(418),I=(a(213),a(131)),y=a(484);var C=function(e){var t=Object(b.useState)(!1),a=Object(j.a)(t,2),s=a[0],i=a[1],l=Object(b.useState)(""),o=Object(j.a)(l,2),d=(o[0],o[1],Object(b.useState)(!1)),m=Object(j.a)(d,2),O=m[0],f=m[1],h=Object(b.useState)(!1),x=Object(j.a)(h,2),C=x[0],S=x[1],w=Object(b.useState)([]),D=Object(j.a)(w,2),k=(D[0],D[1],Object(b.useState)([])),F=Object(j.a)(k,2),P=F[0],q=F[1],A=Object(b.useState)([]),L=Object(j.a)(A,2);return L[0],L[1],Object(n.jsxs)("div",{children:[Object(n.jsxs)(g.a,{type:"primary",className:"modal-button-view",onClick:function(){i(!0),u.a.post("/api/v1/images/search_images",{imageOwnerId:e.info.id,imageReferenceId:2}).then((function(e){var t=e.data;q(t)})).catch((function(e){return console.log(e)}))},children:[Object(n.jsxs)("span",{className:"desktop-view",children:[Object(n.jsx)(y.a,{})," View"]}),Object(n.jsx)("span",{className:"mobile-view",children:Object(n.jsx)(y.a,{})})]}),Object(n.jsxs)(I.a,{title:"Driver Information",visible:s,confirmLoading:O,onOk:function(){e.passedData(e.info),f(!0),S(!1),setTimeout((function(){i(!1),f(!1)}),2e3)},onCancel:function(){S(!0),i(!1)},afterClose:function(){C||e.afterClosing()},footer:[Object(n.jsx)(g.a,{className:"modal-button",loading:O,onClick:function(){return e.info.id,f(!0),S(!1),setTimeout((function(){i(!1),f(!1)}),2e3),void I.a.success({content:"Still in development"})},danger:!0,children:"Remove"})],children:[Object(n.jsxs)("p",{children:[Object(n.jsx)("h4",{children:"ID:"}),e.info.id]}),Object(n.jsxs)("p",{children:[Object(n.jsx)("h4",{children:"Name:"}),e.info.firstName," ",e.info.middleName," ",e.info.lastName]}),Object(n.jsxs)("p",{children:[Object(n.jsx)("h4",{children:"Contact Number:"}),e.info.contactNumber]}),Object(n.jsxs)("p",{children:[Object(n.jsx)("h4",{children:"Address: "}),e.info.address]}),Object(n.jsxs)("p",{children:[Object(n.jsx)("h4",{children:"Email Address: "}),e.info.email]}),Object(n.jsx)("h4",{children:"Uploaded Images: "}),Object(n.jsx)(p.a,{className:"shadow-sm",children:Object(n.jsx)(c.a,{children:P.map((function(e,t){return Object(n.jsxs)(r.a,{md:{span:6},children:[Object(n.jsx)("br",{}),Object(n.jsx)(v.a,{height:100,width:100,src:"/api/v1/images/".concat(e.imagePath?e.imagePath:"logo.png")}),Object(n.jsxs)(c.a,{children:[Object(n.jsx)("br",{}),Object(n.jsx)(g.a,{onClick:function(){return function(e,t){u.a.delete("/api/v1/images/delete_folder_image",{params:{fileName:t,fileId:e}}).then((function(t){var a=Object(N.a)(P);a=a.filter((function(t){return t.id!==e})),q(a),I.a.success({content:"Driver image has been removed"})})).catch((function(e){return console.log(e)}))}(e.id,e.imagePath)},danger:!0,children:"Delete"})]})]},t)}))})})]})]})},S=(a(151),a(51)),w=a(494);var D=function(e){var t=Object(b.useState)(!1),a=Object(j.a)(t,2),s=a[0],i=a[1],c=Object(b.useState)(!1),r=Object(j.a)(c,2),l=r[0],o=r[1],m=Object(b.useState)(!1),O=Object(j.a)(m,2),f=O[0],h=O[1],x=Object(b.useState)([]),p=Object(j.a)(x,2),v=(p[0],p[1],Object(b.useState)({})),N=Object(j.a)(v,2),y=(N[0],N[1],Object(b.useState)("Choose file")),C=Object(j.a)(y,2),D=(C[0],C[1],Object(b.useState)()),k=Object(j.a)(D,2),F=(k[0],k[1],function(){h(!0),i(!1)}),P=function(t){console.log(t),e.passedData(e.info),o(!0),h(!1),setTimeout((function(){i(!1),o(!1)}),2e3),u.a.post("/api/v1/drivers/add_driver",t).then((function(e){I.a.success({content:"Successfully Added New Driver"})})).catch((function(e){return console.log(e)}))};return Object(n.jsxs)("div",{children:[Object(n.jsxs)(g.a,{type:"primary",className:"modal-button-add",onClick:function(){i(!0)},children:[Object(n.jsxs)("span",{className:"desktop-view",children:[Object(n.jsx)(w.a,{})," Add Driver"]}),Object(n.jsx)("span",{className:"mobile-view",children:Object(n.jsx)(w.a,{})})]}),Object(n.jsx)(I.a,{title:"Add Driver:",visible:s,confirmLoading:l,onOk:P,onCancel:F,afterClose:function(){f||e.afterClosing()},destroyOnClose:!0,footer:[Object(n.jsx)(g.a,{className:"modal-button",onClick:F,children:"Cancel"},"back"),Object(n.jsx)(g.a,{form:"myForm",htmlType:"submit",type:"primary",className:"modal-button",loading:l,onClick:P,children:"Add"},"submit")],children:Object(n.jsxs)(S.a,{layout:"vertical",name:"basic",initialValues:{remember:!0},onFinish:P,onFinishFailed:function(e){I.a.error({content:"Failure to Add New Driver"}),setTimeout((function(){i(!0),o(!1)}),2e3)},id:"myForm",children:[Object(n.jsx)(S.a.Item,{label:"First Name",name:"firstName",rules:[{required:!0,message:"Please input your Firstname!"}],children:Object(n.jsx)(d.a,{})}),Object(n.jsx)(S.a.Item,{label:"Middle Name",name:"middleName",rules:[{required:!0,message:"Please input your Middlename!"}],children:Object(n.jsx)(d.a,{})}),Object(n.jsx)(S.a.Item,{label:"Last Name",name:"lastName",rules:[{required:!0,message:"Please input your Lastname!"}],children:Object(n.jsx)(d.a,{})}),Object(n.jsx)(S.a.Item,{label:"Address",name:"address",rules:[{required:!0,message:"Please input your Address!"}],children:Object(n.jsx)(d.a,{})}),Object(n.jsx)(S.a.Item,{label:"Contact Number",name:"contactNumber",rules:[{required:!0,message:"Please input your Contact Number!"}],children:Object(n.jsx)(d.a,{})}),Object(n.jsx)(S.a.Item,{label:"Generate Password",name:"generatePassword",rules:[{required:!0,message:"Please input your password!"}],children:Object(n.jsx)(d.a,{})}),Object(n.jsx)(S.a.Item,{label:"Email",name:"email",rules:[{required:!0,type:"email",message:"Please input your Email!"}],children:Object(n.jsx)(d.a,{})})]})})]})},k=a(38),F=(a(425),a(424)),P=(a(421),a(426)),q=(a(422),a(156)),A=a(403);var L=function(e){var t=Object(b.useState)({}),a=Object(j.a)(t,2),s=(a[0],a[1],Object(b.useState)(!1)),i=Object(j.a)(s,2),r=(i[0],i[1],Object(b.useState)("Choose file")),o=Object(j.a)(r,2),d=(o[0],o[1]),m=Object(b.useState)(""),O=Object(j.a)(m,2),f=O[0],h=O[1],x=Object(b.useState)("none"),p=Object(j.a)(x,2),v=p[0],N=p[1],y=Object(b.useState)(""),C=Object(j.a)(y,2),w=(C[0],C[1],Object(b.useState)([])),D=Object(j.a)(w,2),L=(D[0],D[1],Object(b.useState)([])),T=Object(j.a)(L,2),_=(T[0],T[1],Object(b.useState)(!1)),E=Object(j.a)(_,2),U=(E[0],E[1]),R=Object(b.useState)(!1),V=Object(j.a)(R,2),M=V[0],z=V[1],J=S.a.useForm(),B=Object(j.a)(J,1)[0],G=Object(b.useState)(!1),H=Object(j.a)(G,2),K=H[0],Q=H[1],W=function(){U(!0),setTimeout((function(){z(!1),Q(!1)}),500)},X={name:"file",action:"/api/v1/images/add_image",headers:{authorization:"authorization-text"},data:{imageOwnerId:e.info.id,imageReferenceId:2},onChange:function(e){"uploading"!==e.file.status&&console.log("uploading",e.file,e.fileList),"done"===e.file.status?q.b.success("".concat(e.file.name," file uploaded Successfully.")):"error"===e.file.status&&q.b.error("".concat(e.file.name," file upload Failed.")),N(e.file.status),d(e)}};return Object(n.jsxs)("div",{children:[Object(n.jsxs)(g.a,{type:"primary",className:"modal-button-upload",onClick:function(){B.setFieldsValue({imageOwnerId:e.info.id,imageReferenceId:2}),h(),N("removed"),d("Choose file"),z(!0),console.log(e.info)},children:[Object(n.jsxs)("span",{className:"desktop-view",children:[Object(n.jsx)(A.a,{})," Upload"]}),Object(n.jsx)("span",{className:"mobile-view",children:Object(n.jsx)(A.a,{})})]}),Object(n.jsxs)(I.a,{title:"Driver Image Upload",confirmLoading:K,visible:M,onOk:function(t){"done"==v?u.a.post("/api/v1/images/save_image",{imageOwnerId:e.info.id,imageReferenceId:2,imagePath:f}).then((function(e){q.b.success("Successfully Saved"),setTimeout((function(){z(!1),Q(!1)}),500),h("")})).catch((function(e){return console.log(e)})):q.b.error("Image Saving Error")},onCancel:W,afterClose:function(){Q(!0),U(!1)},destroyOnClose:!0,footer:[Object(n.jsx)(g.a,{className:"modal-button",type:"danger",onClick:W,children:"Close"},"back")],children:[Object(n.jsxs)(P.b,{itemLayout:"vertical",children:[Object(n.jsxs)(P.b.Item,{children:[Object(n.jsx)("h4",{children:"Image Driver ID: "}),e.info.id]}),Object(n.jsxs)(P.b.Item,{children:[Object(n.jsx)("h4",{children:"Image Driver Name: "}),e.info.firstName," ",e.info.firstName," ",e.info.firstName]}),Object(n.jsxs)(P.b.Item,{children:[Object(n.jsx)("h4",{children:"Image Reference Name: "}),"Driver"]})]}),Object(n.jsx)(c.a,{children:Object(n.jsx)(l.b,{style:{width:"100%"},size:"large",children:Object(n.jsx)(F.a,Object(k.a)(Object(k.a)({},X),{},{onRemove:function(e){u.a.delete("/api/v1/images/delete_folder_image",{params:{fileName:e.response.imagePath,fileId:e.response.id}}).then((function(e){N("removed")})).catch((function(e){return console.log(e)})),h(),q.b.error("File removed Successfully.")},listType:"picture-card",showUploadList:{showPreviewIcon:!1},maxCount:5,children:Object(n.jsxs)(l.b,{children:[Object(n.jsx)(A.a,{}),"Upload"]})}))})})]})]})},T=a(495);var _=function(e){var t=Object(b.useState)(!1),a=Object(j.a)(t,2),s=a[0],i=a[1],c=S.a.useForm(),r=Object(j.a)(c,1)[0],l=Object(b.useState)(!1),o=Object(j.a)(l,2),m=o[0],O=o[1],f=Object(b.useState)(!1),h=Object(j.a)(f,2),x=h[0],p=h[1],v=Object(b.useState)(),N=Object(j.a)(v,2),y=N[0],C=N[1],w=function(){p(!0),i(!1)},D=function(t){O(!0),p(!1),e.passedData(e.info),u.a.post("/api/v1/drivers/update_driver",{id:t.id,firstName:t.firstName,middleName:t.middleName,lastName:t.lastName,address:t.address,contactNumber:t.contactNumber,email:t.email}).then((function(e){setTimeout((function(){i(!1),O(!1)}),2e3),y?I.a.success({content:"Successfully Updated Driver Info"}):I.a.success({content:"Driver Info is up to date"})})).catch((function(e){return console.log(e)}))};return Object(n.jsxs)("div",{children:[Object(n.jsxs)(g.a,{type:"primary",className:"modal-button-edit",onClick:function(){r.setFieldsValue({id:e.info.id,firstName:e.info.firstName,middleName:e.info.middleName,lastName:e.info.lastName,address:e.info.address,contactNumber:e.info.contactNumber,email:e.info.email}),i(!0),C(!1)},children:[Object(n.jsxs)("span",{className:"desktop-view",children:[Object(n.jsx)(T.a,{})," Edit"]}),Object(n.jsx)("span",{className:"mobile-view",children:Object(n.jsx)(T.a,{})})]}),Object(n.jsx)(I.a,{title:"Update Driver Info",confirmLoading:m,visible:s,onOk:D,onCancel:w,afterClose:function(){x||e.afterClosing()},destroyOnClose:!0,footer:[Object(n.jsx)(g.a,{className:"modal-button",onClick:w,children:"Cancel"},"back"),Object(n.jsx)(g.a,{form:"myForm",className:"modal-button",htmlType:"submit",type:"primary",children:"Update"})],children:Object(n.jsxs)(S.a,{layout:"vertical",name:"basic",form:r,initialValues:{remember:!0},onFinish:D,onFinishFailed:function(e){I.a.error({content:"Failure to Update Driver Info"}),setTimeout((function(){i(!0),O(!1)}),2e3)},onValuesChange:function(e,t){C(!0)},id:"myForm",children:[Object(n.jsx)(S.a.Item,{label:"Driver ID:",name:"id",children:Object(n.jsx)(d.a,{disabled:!0,bordered:!1})}),Object(n.jsx)(S.a.Item,{label:"Firstname:",name:"firstName",rules:[{required:!0,message:"Please input Firstname!"}],children:Object(n.jsx)(d.a,{})}),Object(n.jsx)(S.a.Item,{label:"Middlename:",name:"middleName",rules:[{required:!0,message:"Please input Middlename!"}],children:Object(n.jsx)(d.a,{})}),Object(n.jsx)(S.a.Item,{label:"Lastname:",name:"lastName",rules:[{required:!0,message:"Please input Lastname!"}],children:Object(n.jsx)(d.a,{})}),Object(n.jsx)(S.a.Item,{label:"Contact:",name:"contactNumber",rules:[{required:!0,message:"Please input Contact Number!"}],children:Object(n.jsx)(d.a,{})}),Object(n.jsx)(S.a.Item,{label:"Address:",name:"address",rules:[{required:!0,message:"Please input the Address!"}],children:Object(n.jsx)(d.a,{})}),Object(n.jsx)(S.a.Item,{label:"Email:",name:"email",rules:[{required:!0,message:"Please input Email!"}],children:Object(n.jsx)(d.a,{})})]})})]})};t.default=function(){var e=Object(b.useState)([]),t=Object(j.a)(e,2),a=t[0],m=t[1],O=d.a.Search,h=Object(b.useState)(""),p=Object(j.a)(h,2),v=p[0],g=p[1],N=o.a.Title;Object(b.useEffect)((function(){u.a.get("/api/v1/drivers/").then((function(e){var t=e.data;m(t)})).catch((function(e){return console.log(e)}))}),[]);var I=function(){console.log("Passed data from modal",v),u.a.get("/api/v1/drivers/").then((function(e){var t=e.data;m(t)}))};return Object(n.jsxs)("div",{class:"drivers-table",children:[Object(n.jsxs)(c.a,{justify:"space-between",children:[Object(n.jsx)(r.a,{span:4,children:Object(n.jsx)(l.b,{direction:"vertical",children:Object(n.jsx)(O,{placeholder:"Search Drivers",onSearch:function(e){u.a.post("/api/v1/drivers/search_drivers",{value:e}).then((function(e){console.log(e);var t=e.data;m(t)}))},allowClear:!0,enterButton:!0})})}),Object(n.jsx)(r.a,{span:4,children:Object(n.jsx)(D,{info:"",passedData:g,afterClosing:I})})]}),Object(n.jsx)(i.a,{children:Object(n.jsx)(N,{level:4,children:"List of Drivers"})}),Object(n.jsx)(c.a,{children:Object(n.jsxs)(s.a,{dataSource:a,scroll:{x:1e3,y:500},sticky:!0,children:[Object(n.jsx)(f.a,{title:"Firstname",dataIndex:"firstName"},"firstName"),Object(n.jsx)(f.a,{title:"Middlename",dataIndex:"middleName"},"middleName"),Object(n.jsx)(f.a,{title:"Lastname",dataIndex:"lastName"},"lastName"),Object(n.jsx)(x.a,{title:"Contact",dataIndex:"contactNumber"},"contactNumber"),Object(n.jsx)(x.a,{title:"Address",dataIndex:"address"},"address"),Object(n.jsx)(x.a,{title:"Email",dataIndex:"email"},"email"),Object(n.jsx)(x.a,{title:"Actions",fixed:"right",width:"30vh",render:function(e){return Object(n.jsxs)(l.b,{children:[Object(n.jsx)(C,{info:e,passedData:g,afterClosing:I}),Object(n.jsx)(_,{info:e,passedData:g,afterClosing:I}),Object(n.jsx)(L,{info:e})]})}},"actions")]})})]})}}}]);
//# sourceMappingURL=10.e5fe1060.chunk.js.map