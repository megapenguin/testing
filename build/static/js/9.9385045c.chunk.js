(this["webpackJsonpretrack-admin"]=this["webpackJsonpretrack-admin"]||[]).push([[9],{490:function(e,a,t){"use strict";t.r(a);t(415);var n=t(414),c=(t(407),t(408)),s=(t(130),t(61)),i=t(4),o=(t(133),t(43)),r=(t(409),t(410)),l=(t(152),t(105)),j=(t(132),t(62)),b=t(104),d=t(0),u=t(92),O=t.n(u),m=t(412),f=t.n(m),g=t(413),h=t.n(g),p=(t(153),t(106)),x=(t(214),t(154)),y=(t(91),t(49)),v=(t(213),t(131)),S=t(418),N=t(484);var C=function(e){var a=Object(d.useState)(!1),t=Object(b.a)(a,2),n=t[0],c=t[1],r=Object(d.useState)(""),l=Object(b.a)(r,2),j=(l[0],l[1],Object(d.useState)(!1)),u=Object(b.a)(j,2),m=u[0],f=u[1],g=Object(d.useState)(!1),h=Object(b.a)(g,2),C=h[0],I=h[1],B=Object(d.useState)([]),w=Object(b.a)(B,2),k=(w[0],w[1],Object(d.useState)([])),D=Object(b.a)(k,2),F=D[0],L=D[1],T=Object(d.useState)([]),_=Object(b.a)(T,2);return _[0],_[1],Object(i.jsxs)("div",{children:[Object(i.jsxs)(y.a,{type:"primary",className:"modal-button-view",onClick:function(){c(!0),O.a.post("/api/v1/images/search_images",{imageOwnerId:e.info.id,imageReferenceId:1}).then((function(e){var a=e.data;L(a)})).catch((function(e){return console.log(e)}))},children:[Object(i.jsxs)("span",{className:"desktop-view",children:[Object(i.jsx)(N.a,{})," View"]}),Object(i.jsx)("span",{className:"mobile-view",children:Object(i.jsx)(N.a,{})})]}),Object(i.jsxs)(v.a,{title:"Barangay Information",visible:n,confirmLoading:m,onOk:function(){e.passedData(e.info),f(!0),I(!1),setTimeout((function(){c(!1),f(!1)}),2e3)},onCancel:function(){I(!0),c(!1)},afterClose:function(){C||e.afterClosing()},destroyOnClose:!0,footer:[Object(i.jsx)(y.a,{loading:m,onClick:function(){return e.info.id,f(!0),I(!1),setTimeout((function(){c(!1),f(!1)}),2e3),void v.a.success({content:"Still in development"})},danger:!0,className:"modal-button",children:"Remove Barangay"})],children:[Object(i.jsxs)("p",{children:[Object(i.jsx)("h4",{children:"Bargangay ID:"}),e.info.id]}),Object(i.jsxs)("p",{children:[Object(i.jsx)("h4",{children:"Barangay Name:"}),e.info.barangayName]}),Object(i.jsxs)("p",{children:[Object(i.jsx)("h4",{children:"Location:"}),e.info.location]}),Object(i.jsxs)("p",{children:[Object(i.jsx)("h4",{children:"Barangay Description: "}),e.info.barangayDescription]}),Object(i.jsx)("h4",{children:"Uploaded Images: "}),Object(i.jsx)(p.a,{className:"shadow-sm",children:Object(i.jsx)(s.a,{children:F.map((function(e,a){return Object(i.jsxs)(o.a,{md:{span:6},children:[Object(i.jsx)("br",{}),Object(i.jsx)(x.a,{height:100,width:100,src:"/api/v1/images/".concat(e.imagePath?e.imagePath:"logo.png")}),Object(i.jsxs)(s.a,{children:[Object(i.jsx)("br",{}),Object(i.jsx)(y.a,{onClick:function(){return function(e,a){O.a.delete("/api/v1/images/delete_folder_image",{params:{fileName:a,fileId:e}}).then((function(a){var t=Object(S.a)(F);t=t.filter((function(a){return a.id!==e})),L(t),v.a.success({content:"Barangay image has been removed"})})).catch((function(e){return console.log(e)}))}(e.id,e.imagePath)},danger:!0,children:"Delete"})]})]},a)}))})})]})]})},I=(t(151),t(51)),B=t(494);var w=function(e){var a=Object(d.useState)(!1),t=Object(b.a)(a,2),n=t[0],c=t[1],s=Object(d.useState)(""),o=Object(b.a)(s,2),r=(o[0],o[1],Object(d.useState)(!1)),l=Object(b.a)(r,2),u=l[0],m=l[1],f=Object(d.useState)(!1),g=Object(b.a)(f,2),h=g[0],p=g[1],x=Object(d.useState)([]),S=Object(b.a)(x,2),N=(S[0],S[1],Object(d.useState)({})),C=Object(b.a)(N,2),w=(C[0],C[1],Object(d.useState)("Choose file")),k=Object(b.a)(w,2),D=(k[0],k[1],Object(d.useState)()),F=Object(b.a)(D,2),L=(F[0],F[1],function(){p(!0),c(!1)}),T=function(a){console.log(a),e.passedData(e.info),m(!0),p(!1),setTimeout((function(){c(!1),m(!1)}),2e3),O.a.post("/api/v1/barangays/add_barangay",a).then((function(e){v.a.success({content:"Successfully Added New Barangay"})})).catch((function(e){return console.log(e)}))};return Object(i.jsxs)("div",{children:[Object(i.jsxs)(y.a,{type:"primary",className:"modal-button-add",onClick:function(){c(!0),console.log(e.info)},children:[Object(i.jsxs)("span",{className:"desktop-view",children:[Object(i.jsx)(B.a,{})," Add Barangay"]}),Object(i.jsx)("span",{className:"mobile-view",children:Object(i.jsx)(B.a,{})})]}),Object(i.jsx)(v.a,{title:"Add Barangay:",visible:n,confirmLoading:u,onOk:T,onCancel:L,afterClose:function(){h||e.afterClosing()},destroyOnClose:!0,footer:[Object(i.jsx)(y.a,{className:"modal-button",onClick:L,children:"Cancel"},"back"),Object(i.jsx)(y.a,{form:"myForm",htmlType:"submit",type:"primary",loading:u,onClick:T,className:"modal-button",children:"Add"},"submit")],children:Object(i.jsxs)(I.a,{layout:"vertical",name:"basic",initialValues:{remember:!0},onFinish:T,onFinishFailed:function(e){v.a.error({content:"Failure to Add New Barangay"}),setTimeout((function(){c(!0),m(!1)}),2e3)},id:"myForm",children:[Object(i.jsx)(I.a.Item,{label:"Barangay Name",name:"barangayName",rules:[{required:!0,message:"Please input the Barangay's Name!"}],children:Object(i.jsx)(j.a,{})}),Object(i.jsx)(I.a.Item,{label:"Location",name:"location",rules:[{required:!0,message:"Please input Barangay's Location!"}],children:Object(i.jsx)(j.a,{})}),Object(i.jsx)(I.a.Item,{label:"Barangay Description",name:"barangayDescription",rules:[{required:!0,message:"Please input the Barangay's Description!"}],children:Object(i.jsx)(j.a.TextArea,{})})]})})]})},k=t(495);var D=function(e){var a=Object(d.useState)(!1),t=Object(b.a)(a,2),n=t[0],c=t[1],s=I.a.useForm(),o=Object(b.a)(s,1)[0],r=Object(d.useState)(!1),l=Object(b.a)(r,2),u=l[0],m=l[1],f=Object(d.useState)(!1),g=Object(b.a)(f,2),h=g[0],p=g[1],x=Object(d.useState)(),S=Object(b.a)(x,2),N=S[0],C=S[1],B=Object(d.useState)([]),w=Object(b.a)(B,2),D=(w[0],w[1],function(){p(!0),c(!1)}),F=function(a){m(!0),p(!1),e.passedData(e.info),O.a.post("/api/v1/barangays/update_barangay",{id:a.id,barangayName:a.barangayName,location:a.location,barangayDescription:a.barangayDescription}).then((function(e){setTimeout((function(){c(!1),m(!1)}),2e3),N?v.a.success({content:"Successfully Updated Barangay"}):v.a.success({content:"Barangay Info is up to date"})})).catch((function(e){return console.log(e)}))};return Object(i.jsxs)("div",{children:[Object(i.jsxs)(y.a,{type:"primary",className:"modal-button-edit",onClick:function(){o.setFieldsValue({id:e.info.id,barangayName:e.info.barangayName,location:e.info.location,barangayDescription:e.info.barangayDescription}),c(!0),C(!1)},children:[Object(i.jsxs)("span",{className:"desktop-view",children:[Object(i.jsx)(k.a,{})," Edit"]}),Object(i.jsx)("span",{className:"mobile-view",children:Object(i.jsx)(k.a,{})})]}),Object(i.jsx)(v.a,{title:"Update Barangay Info",confirmLoading:u,visible:n,onOk:F,onCancel:D,afterClose:function(){h||e.afterClosing()},destroyOnClose:!0,footer:[Object(i.jsx)(y.a,{className:"modal-button",onClick:D,children:"Cancel"},"back"),Object(i.jsx)(y.a,{form:"myForm",className:"modal-button",htmlType:"submit",type:"primary",children:"Update"})],children:Object(i.jsxs)(I.a,{layout:"vertical",name:"basic",form:o,initialValues:{remember:!0},onFinish:F,onFinishFailed:function(e){v.a.error({content:"Failure to Update Barangay Info"}),setTimeout((function(){c(!0),m(!1)}),2e3)},onValuesChange:function(e,a){C(!0)},id:"myForm",children:[Object(i.jsx)(I.a.Item,{label:"Barangay ID:",name:"id",children:Object(i.jsx)(j.a,{disabled:!0,bordered:!1})}),Object(i.jsx)(I.a.Item,{label:"Barangay Name:",name:"barangayName",rules:[{required:!0,message:"Please input the Barangay's Name!"}],children:Object(i.jsx)(j.a,{})}),Object(i.jsx)(I.a.Item,{label:"Location:",name:"location",rules:[{required:!0,message:"Please input Barangay's Location!"}],children:Object(i.jsx)(j.a,{})}),Object(i.jsx)(I.a.Item,{label:"Barangay Description:",name:"barangayDescription",rules:[{required:!0,message:"Please input the Barangay's Description!"}],children:Object(i.jsx)(j.a.TextArea,{})})]})})]})},F=t(38),L=(t(425),t(424)),T=(t(421),t(426)),_=(t(422),t(156)),P=t(403);var U=function(e){var a=Object(d.useState)({}),t=Object(b.a)(a,2),n=(t[0],t[1],Object(d.useState)(!1)),c=Object(b.a)(n,2),o=(c[0],c[1],Object(d.useState)("Choose file")),l=Object(b.a)(o,2),j=(l[0],l[1]),u=Object(d.useState)(""),m=Object(b.a)(u,2),f=m[0],g=m[1],h=Object(d.useState)("none"),p=Object(b.a)(h,2),x=p[0],S=p[1],N=Object(d.useState)(""),C=Object(b.a)(N,2),B=(C[0],C[1],Object(d.useState)([])),w=Object(b.a)(B,2),k=(w[0],w[1],Object(d.useState)([])),D=Object(b.a)(k,2),U=(D[0],D[1],Object(d.useState)(!1)),A=Object(b.a)(U,2),R=(A[0],A[1]),q=Object(d.useState)(!1),V=Object(b.a)(q,2),z=V[0],E=V[1],J=I.a.useForm(),G=Object(b.a)(J,1)[0],H=Object(d.useState)(!1),K=Object(b.a)(H,2),M=K[0],Q=K[1],W=function(){R(!0),setTimeout((function(){E(!1),Q(!1)}),500)},X={name:"file",action:"/api/v1/images/add_image",headers:{authorization:"authorization-text"},data:{imageOwnerId:e.info.id,imageReferenceId:1},onChange:function(e){"uploading"!==e.file.status&&console.log("uploading",e.file,e.fileList),"done"===e.file.status?_.b.success("".concat(e.file.name," file uploaded Successfully.")):"error"===e.file.status&&_.b.error("".concat(e.file.name," file upload Failed.")),S(e.file.status),j(e)}};return Object(i.jsxs)("div",{children:[Object(i.jsxs)(y.a,{type:"primary",className:"modal-button-upload",onClick:function(){G.setFieldsValue({imageOwnerId:e.info.id,imageReferenceId:1}),g(),S("removed"),j("Choose file"),E(!0),console.log(e.info)},children:[Object(i.jsxs)("span",{className:"desktop-view",children:[Object(i.jsx)(P.a,{})," Upload"]}),Object(i.jsx)("span",{className:"mobile-view",children:Object(i.jsx)(P.a,{})})]}),Object(i.jsxs)(v.a,{title:"Barangay Image Upload",confirmLoading:M,visible:z,onOk:function(a){"done"==x?O.a.post("/api/v1/images/save_image",{imageOwnerId:e.info.id,imageReferenceId:1,imagePath:f}).then((function(e){_.b.success("Successfully Saved"),setTimeout((function(){E(!1),Q(!1)}),500),g("")})).catch((function(e){return console.log(e)})):_.b.error("Image Saving Error")},onCancel:W,afterClose:function(){Q(!0),R(!1)},destroyOnClose:!0,footer:[Object(i.jsx)(y.a,{className:"modal-button",type:"danger",onClick:W,children:"Close"},"back")],children:[Object(i.jsxs)(T.b,{itemLayout:"vertical",children:[Object(i.jsxs)(T.b.Item,{children:[Object(i.jsx)("h4",{children:"Image Barangay ID: "}),e.info.id]}),Object(i.jsxs)(T.b.Item,{children:[Object(i.jsx)("h4",{children:"Image Barangay Name: "}),e.info.barangayName]}),Object(i.jsxs)(T.b.Item,{children:[Object(i.jsx)("h4",{children:"Image Reference Name: "}),"Barangay"]})]}),Object(i.jsx)(s.a,{children:Object(i.jsx)(r.b,{style:{width:"100%"},size:"large",children:Object(i.jsx)(L.a,Object(F.a)(Object(F.a)({},X),{},{onRemove:function(e){O.a.delete("/api/v1/images/delete_folder_image",{params:{fileName:e.response.imagePath,fileId:e.response.id}}).then((function(e){S("removed")})).catch((function(e){return console.log(e)})),g(),_.b.error("File removed Successfully.")},listType:"picture-card",showUploadList:{showPreviewIcon:!1},maxCount:5,children:Object(i.jsxs)(r.b,{children:[Object(i.jsx)(P.a,{}),"Upload"]})}))})})]})]})};a.default=function(){var e=Object(d.useState)([]),a=Object(b.a)(e,2),t=a[0],u=a[1],m=j.a.Search,g=Object(d.useState)(""),p=Object(b.a)(g,2),x=p[0],y=p[1],v=l.a.Title;Object(d.useEffect)((function(){O.a.get("/api/v1/barangays/search_all_barangays").then((function(e){var a=e.data;u(a)})).catch((function(e){return console.log(e)}))}),[]);var S=function(){console.log("Passed data from modal",x),O.a.get("/api/v1/barangays/search_all_barangays").then((function(e){var a=e.data;u(a)}))};return Object(i.jsxs)("div",{children:[Object(i.jsxs)(s.a,{justify:"space-between",children:[Object(i.jsx)(o.a,{span:4,children:Object(i.jsx)(r.b,{direction:"vertical",children:Object(i.jsx)(m,{placeholder:"Search Barangay",onSearch:function(e){O.a.post("/api/v1/barangays/search_barangays",{value:e}).then((function(e){console.log(e);var a=e.data;u(a),console.log("success")}))},allowClear:!0,enterButton:!0})})}),Object(i.jsx)(o.a,{span:4,children:Object(i.jsx)(w,{info:"",passedData:y,afterClosing:S})})]}),Object(i.jsx)(c.a,{children:Object(i.jsx)(v,{level:4,children:"List of Barangays"})}),Object(i.jsx)(s.a,{children:Object(i.jsxs)(n.a,{dataSource:t,scroll:{x:1e3,y:500},sticky:!0,children:[Object(i.jsx)(f.a,{title:"Barangay Name",dataIndex:"barangayName"},"barangayName"),Object(i.jsx)(h.a,{title:"Location",dataIndex:"location"},"location"),Object(i.jsx)(h.a,{title:"Barangay Description",dataIndex:"barangayDescription"},"barangayDescription"),Object(i.jsx)(h.a,{title:"Actions",fixed:"right",width:"35vh",render:function(e){return Object(i.jsxs)(r.b,{children:[Object(i.jsx)(C,{info:e,passedData:y,afterClosing:S}),Object(i.jsx)(D,{info:e,passedData:y,afterClosing:S}),Object(i.jsx)(U,{info:e})]})}},"actions")]})})]})}}}]);
//# sourceMappingURL=9.9385045c.chunk.js.map