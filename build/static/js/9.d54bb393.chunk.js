(this["webpackJsonpretrack-admin"]=this["webpackJsonpretrack-admin"]||[]).push([[9],{500:function(e,t,a){"use strict";a.r(t);a(413);var n=a(410),c=(a(406),a(407)),i=(a(123),a(56)),s=a(5),o=(a(124),a(44)),r=(a(399),a(402)),l=(a(122),a(59)),j=a(100),d=a(0),u=a(88),b=a.n(u),O=a(408),f=a.n(O),p=a(409),h=a.n(p),g=(a(145),a(101)),m=(a(207),a(146)),x=(a(99),a(63)),y=(a(400),a(401)),v=a(397);var C=function(e){var t=Object(d.useState)(!1),a=Object(j.a)(t,2),n=a[0],c=a[1],i=Object(d.useState)(""),o=Object(j.a)(i,2),l=(o[0],o[1],Object(d.useState)(!1)),u=Object(j.a)(l,2),O=u[0],f=u[1],p=Object(d.useState)(!1),h=Object(j.a)(p,2),C=h[0],S=h[1],I=Object(d.useState)([]),J=Object(j.a)(I,2),k=J[0],w=J[1],N=Object(d.useState)([]),_=Object(j.a)(N,2),P=_[0],F=_[1],A=Object(d.useState)([]),T=Object(j.a)(A,2),B=T[0],D=T[1];return Object(d.useEffect)((function(){b.a.get("/api/v1/images/").then((function(e){var t=e.data;F(t)})).catch((function(e){return console.log(e)}))}),[]),Object(s.jsxs)("div",{children:[Object(s.jsx)(r.b,{children:Object(s.jsx)(x.a,{type:"primary",onClick:function(){c(!0),b.a.get("/api/v1/images/").then((function(t){var a=Object(v.a)(P);a=a.find((function(t){return t.imageOwnerId===e.info.id&&3===t.imageReferenceId})),D(a.imagePath)})).catch((function(e){return console.log(e)}))},children:"View"})}),Object(s.jsxs)(y.a,{title:"Jeepney Information",visible:n,confirmLoading:O,onOk:function(){e.passedData(e.info),f(!0),S(!1),setTimeout((function(){c(!1),f(!1)}),2e3)},onCancel:function(){S(!0),c(!1)},afterClose:function(){C||e.afterClosing()},footer:[Object(s.jsx)(x.a,{loading:O,onClick:function(){return t=e.info.id,f(!0),S(!1),setTimeout((function(){c(!1),f(!1)}),2e3),b.a.delete("/api/v1/images/delete_image",{params:{id:t,referenceId:3}}).then((function(e){var a=Object(v.a)(P);a=a.filter((function(e){return e.imageOwnerId!==t&&3===e.imageReferenceId})),F(a),console.log(a)})).catch((function(e){return console.log(e)})),void b.a.delete("/api/v1/jeepneys/delete_jeep",{params:{id:t}}).then((function(e){var a=Object(v.a)(k);a=a.filter((function(e){return e.id!==t})),w(a),console.log(a),y.a.success({content:"Jeepney has been Removed"})})).catch((function(e){return console.log(e)}));var t},danger:!0,children:"Remove"})],children:[Object(s.jsxs)("p",{children:[Object(s.jsx)("h3",{children:"Barangay Id:"}),e.info.barangayId]}),Object(s.jsxs)("p",{children:[Object(s.jsx)("h3",{children:"Plate Number:"}),e.info.plateNumber]}),Object(s.jsxs)("p",{children:[Object(s.jsx)("h3",{children:"Jeep Capacity:"}),e.info.jeepCapacity]}),Object(s.jsx)("h3",{children:"Uploaded Images: "}),Object(s.jsx)(g.a,{className:"shadow-sm",children:Object(s.jsx)(m.a,{height:100,src:"/api/v1/images/".concat(B),style:{borderColor:"white",border:"10px"}})})]})]})},S=(a(405),a(404)),I=(a(144),a(49)),J=(a(424),a(411)),k=a(501);var w=function(e){var t=Object(d.useState)(!1),a=Object(j.a)(t,2),n=a[0],c=a[1],i=Object(d.useState)(""),o=Object(j.a)(i,2),r=(o[0],o[1],Object(d.useState)(!1)),u=Object(j.a)(r,2),O=u[0],f=u[1],p=Object(d.useState)(!1),h=Object(j.a)(p,2),g=h[0],m=h[1],C=Object(d.useState)([]),w=Object(j.a)(C,2),N=w[0],_=w[1],P=Object(d.useState)({}),F=Object(j.a)(P,2),A=F[0],T=(F[1],Object(d.useState)("Choose file")),B=Object(j.a)(T,2),D=(B[0],B[1]),R=Object(d.useState)(),q=Object(j.a)(R,2),E=q[0],L=(q[1],Object(d.useState)([])),V=Object(j.a)(L,2),U=V[0],M=V[1];Object(d.useEffect)((function(){b.a.get("/api/v1/barangays/search_all_barangays").then((function(e){console.log(e);var t=e.data;M(t)})).catch((function(e){return console.log(e)}))}),[]);var z=J.a.Option,G=function(){m(!0),c(!1)},H=function(t){console.log(t),e.passedData(e.info),f(!0),m(!1),setTimeout((function(){c(!1),f(!1)}),2e3),b.a.post("/api/v1/jeepneys/add_jeep",t).then((function(e){var t=Object(v.a)(N);t=[].concat(Object(v.a)(t),[e.data]),console.log(t),_(t),y.a.success({content:"Successfully Added New Jeepney"}),b.a.post("/api/v1/images/save_image",{imageOwnerId:e.data.id,imageReferenceId:3,imagePath:E})})).catch((function(e){return console.log(e)}))};return Object(s.jsxs)("div",{children:[Object(s.jsx)(x.a,{type:"primary",onClick:function(){c(!0),console.log(e.info)},children:"Add Jeepney"}),Object(s.jsx)(y.a,{title:"Add Jeepney:",visible:n,confirmLoading:O,onOk:H,onCancel:G,afterClose:function(){g||e.afterClosing()},destroyOnClose:!0,footer:[Object(s.jsx)(x.a,{onClick:G,children:"Cancel"},"back"),Object(s.jsx)(x.a,{form:"myForm",htmlType:"submit",type:"primary",loading:O,onClick:H,children:"Add"},"submit")],children:Object(s.jsxs)(I.a,{name:"basic",initialValues:{remember:!0},onFinish:H,onFinishFailed:function(e){y.a.error({content:"Failure to Add New Jeepney"}),setTimeout((function(){c(!0),f(!1)}),2e3),console.log("fail"),console.log("Failed:",e)},id:"myForm",children:[Object(s.jsx)(I.a.Item,{label:"Barangay",name:"barangayId",rules:[{required:!0,message:"Please input the Barangay's ID!"}],children:Object(s.jsx)(J.a,{defaultValue:"-Select-",style:{width:120},onChange:function(e){console.log("selected ".concat(e))},children:U.map((function(e,t){return Object(s.jsx)(z,{value:e.id,children:e.barangayName})}))})}),Object(s.jsx)(I.a.Item,{label:"Plate Number",name:"plateNumber",rules:[{required:!0,message:"Please input the Plate Number!"}],children:Object(s.jsx)(l.a,{})}),Object(s.jsx)(I.a.Item,{label:"Jeep Capacity",name:"jeepCapacity",rules:[{required:!0,message:"Please input the Jeep Capacity!"}],children:Object(s.jsx)(l.a,{})}),Object(s.jsx)(S.a,{action:"/api/v1/images/add_image",listType:"picture",maxCount:1,file:A,onChange:function(e){D(e)},children:Object(s.jsx)(x.a,{icon:Object(s.jsx)(k.a,{}),children:"Upload Image (Max: 1)"})})]})})]})};t.default=function(){var e=Object(d.useState)([]),t=Object(j.a)(e,2),a=t[0],u=t[1],O=l.a.Search,p=Object(d.useState)(""),g=Object(j.a)(p,2),m=g[0],x=g[1];Object(d.useEffect)((function(){b.a.get("/api/v1/jeepneys/search_all_jeepneys").then((function(e){console.log(e);var t=e.data;u(t)})).catch((function(e){return console.log(e)}))}),[]);var y=function(){console.log("Passed data from modal",m),b.a.get("/api/v1/jeepneys/search_all_jeepneys").then((function(e){console.log(e);var t=e.data;u(t)}))};return Object(s.jsxs)("div",{children:[Object(s.jsxs)(i.a,{justify:"space-between",children:[Object(s.jsx)(o.a,{span:4,children:Object(s.jsx)(r.b,{direction:"vertical",children:Object(s.jsx)(O,{placeholder:"Search Jeepney",onSearch:function(e){b.a.post("/api/v1/jeepneys/search_jeepneys",{value:e}).then((function(e){console.log(e);var t=e.data;u(t),console.log("success")})),console.log(e)},allowClear:!0,enterButton:!0})})}),Object(s.jsx)(o.a,{span:4,children:Object(s.jsx)(w,{info:"",passedData:x,afterClosing:y})})]}),Object(s.jsx)(c.a,{orientation:"center",children:"List of Jeepneys"}),Object(s.jsx)(i.a,{children:Object(s.jsxs)(n.a,{dataSource:a,scroll:{x:1e3,y:500},sticky:!0,children:[Object(s.jsx)(f.a,{title:"Barangay Id",dataIndex:"barangayId"},"barangayId"),Object(s.jsx)(h.a,{title:"Plate Number",dataIndex:"plateNumber"},"plateNumber"),Object(s.jsx)(h.a,{title:"Jeep Capacity",dataIndex:"jeepCapacity"},"jeepCapacity"),Object(s.jsx)(h.a,{title:"Actions",fixed:"right",render:function(e){return Object(s.jsx)(r.b,{children:Object(s.jsx)(C,{info:e,passedData:x,afterClosing:y})})}},"actions")]})})]})}}}]);
//# sourceMappingURL=9.d54bb393.chunk.js.map