(this["webpackJsonpretrack-admin"]=this["webpackJsonpretrack-admin"]||[]).push([[6],{495:function(e,a,t){},499:function(e,a,t){"use strict";t.r(a);t(414);var n=t(411),c=(t(407),t(408)),i=(t(123),t(56)),o=t(5),s=(t(124),t(44)),r=(t(402),t(403)),l=(t(122),t(58)),j=t(100),d=t(0),b=t(87),u=t.n(b),g=t(409),O=t.n(g),m=t(410),f=t.n(m),h=(t(146),t(101)),p=(t(208),t(145)),x=(t(99),t(63)),y=(t(399),t(400)),v=t(398);var C=function(e){var a=Object(d.useState)(!1),t=Object(j.a)(a,2),n=t[0],c=t[1],r=Object(d.useState)(""),l=Object(j.a)(r,2),b=(l[0],l[1],Object(d.useState)(!1)),g=Object(j.a)(b,2),O=g[0],m=g[1],f=Object(d.useState)(!1),C=Object(j.a)(f,2),S=C[0],I=C[1],B=Object(d.useState)([]),k=Object(j.a)(B,2),D=(k[0],k[1],Object(d.useState)([])),F=Object(j.a)(D,2),w=F[0],N=F[1],_=Object(d.useState)([]),P=Object(j.a)(_,2);return P[0],P[1],Object(o.jsxs)("div",{children:[Object(o.jsx)(x.a,{type:"primary",onClick:function(){c(!0),u.a.post("/api/v1/images/search_images",{imageOwnerId:e.info.id,imageReferenceId:1}).then((function(e){var a=e.data;N(a),console.log("images",w)})).catch((function(e){return console.log(e)}))},children:"View"}),Object(o.jsxs)(y.a,{title:"Barangay Information",visible:n,confirmLoading:O,onOk:function(){e.passedData(e.info),m(!0),I(!1),setTimeout((function(){c(!1),m(!1)}),2e3)},onCancel:function(){I(!0),c(!1)},afterClose:function(){S||e.afterClosing()},destroyOnClose:!0,footer:[Object(o.jsx)(x.a,{loading:O,onClick:function(){return e.info.id,m(!0),I(!1),setTimeout((function(){c(!1),m(!1)}),2e3),void y.a.success({content:"Still in development"})},danger:!0,children:"Remove Barangay"})],children:[Object(o.jsxs)("p",{children:[Object(o.jsx)("h3",{children:"Bargangay ID:"}),e.info.id]}),Object(o.jsxs)("p",{children:[Object(o.jsx)("h3",{children:"Barangay Name:"}),e.info.barangayName]}),Object(o.jsxs)("p",{children:[Object(o.jsx)("h3",{children:"Location:"}),e.info.location]}),Object(o.jsxs)("p",{children:[Object(o.jsx)("h3",{children:"Barangay Description: "}),e.info.barangayDescription]}),Object(o.jsx)("h3",{children:"Uploaded Images: "}),Object(o.jsx)(h.a,{className:"shadow-sm",children:w.map((function(e,a){return Object(o.jsx)(s.a,{md:{span:6},children:Object(o.jsxs)(i.a,{children:[Object(o.jsx)(p.a,{height:100,src:"/api/v1/images/".concat(e.imagePath?e.imagePath:"logo.png"),style:{borderColor:"white",border:"10px"}}),Object(o.jsx)(x.a,{onClick:function(){return a=e.id,void u.a.delete("/api/v1/images/delete_image",{params:{id:a,referenceId:1}}).then((function(e){var t=Object(v.a)(w);t=t.filter((function(e){return e.id!==a})),N(t),y.a.success({content:"Barangay image has been removed"})})).catch((function(e){return console.log(e)}));var a},danger:!0,children:"Delete"})]})},a)}))})]})]})},S=(t(405),t(404)),I=(t(144),t(48)),B=t(503);var k=function(e){var a=Object(d.useState)(!1),t=Object(j.a)(a,2),n=t[0],c=t[1],i=Object(d.useState)(""),s=Object(j.a)(i,2),r=(s[0],s[1],Object(d.useState)(!1)),b=Object(j.a)(r,2),g=b[0],O=b[1],m=Object(d.useState)(!1),f=Object(j.a)(m,2),h=f[0],p=f[1],C=Object(d.useState)([]),k=Object(j.a)(C,2),D=k[0],F=k[1],w=Object(d.useState)({}),N=Object(j.a)(w,2),_=N[0],P=(N[1],Object(d.useState)("Choose file")),T=Object(j.a)(P,2),L=(T[0],T[1]),U=Object(d.useState)(),A=Object(j.a)(U,2),R=A[0],V=(A[1],function(){p(!0),c(!1)}),q=function(a){console.log(a),e.passedData(e.info),O(!0),p(!1),setTimeout((function(){c(!1),O(!1)}),2e3),u.a.post("/api/v1/barangays/add_barangay",a).then((function(e){var a=Object(v.a)(D);a=[].concat(Object(v.a)(a),[e.data]),console.log(a),F(a),y.a.success({content:"Successfully Added New Barangay"}),u.a.post("/api/v1/images/save_image",{imageOwnerId:e.data.id,imageReferenceId:2,imagePath:R})})).catch((function(e){return console.log(e)}))};return Object(o.jsxs)("div",{children:[Object(o.jsx)(x.a,{type:"primary",onClick:function(){c(!0),console.log(e.info)},children:"Add Barangay"}),Object(o.jsx)(y.a,{title:"Add Barangay:",visible:n,confirmLoading:g,onOk:q,onCancel:V,afterClose:function(){h||e.afterClosing()},destroyOnClose:!0,footer:[Object(o.jsx)(x.a,{onClick:V,children:"Cancel"},"back"),Object(o.jsx)(x.a,{form:"myForm",htmlType:"submit",type:"primary",loading:g,onClick:q,children:"Add"},"submit")],children:Object(o.jsxs)(I.a,{name:"basic",initialValues:{remember:!0},onFinish:q,onFinishFailed:function(e){y.a.error({content:"Failure to Add New Barangay"}),setTimeout((function(){c(!0),O(!1)}),2e3),console.log("fail"),console.log("Failed:",e)},id:"myForm",children:[Object(o.jsx)(I.a.Item,{label:"Barangay Name",name:"barangayName",rules:[{required:!0,message:"Please input the Barangay's Name!"}],children:Object(o.jsx)(l.a,{})}),Object(o.jsx)(I.a.Item,{label:"Location",name:"location",rules:[{required:!0,message:"Please input Barangay's Location!"}],children:Object(o.jsx)(l.a,{})}),Object(o.jsx)(I.a.Item,{label:"Barangay Description",name:"barangayDescription",rules:[{required:!0,message:"Please input the Barangay's Description!"}],children:Object(o.jsx)(l.a,{})}),Object(o.jsx)(S.a,{action:"/api/v1/images/add_image",listType:"picture",maxCount:1,file:_,onChange:function(e){L(e)},children:Object(o.jsx)(x.a,{icon:Object(o.jsx)(B.a,{}),children:"Upload Image (Max: 1)"})})]})})]})};var D=function(e){var a=Object(d.useState)(!1),t=Object(j.a)(a,2),n=t[0],c=t[1],i=I.a.useForm(),s=Object(j.a)(i,1)[0],r=Object(d.useState)(!1),b=Object(j.a)(r,2),g=b[0],O=b[1],m=Object(d.useState)(!1),f=Object(j.a)(m,2),h=f[0],p=f[1],v=Object(d.useState)(),C=Object(j.a)(v,2),S=C[0],B=C[1],k=Object(d.useState)([]),D=Object(j.a)(k,2),F=(D[0],D[1],function(){p(!0),c(!1)}),w=function(a){console.log(S),O(!0),p(!1),e.passedData(e.info),u.a.post("/api/v1/barangays/update_barangay",{id:a.id,barangayName:a.barangayName,location:a.location,barangayDescription:a.barangayDescription}).then((function(e){setTimeout((function(){c(!1),O(!1)}),2e3),S?y.a.success({content:"Successfully Updated Barangay"}):y.a.success({content:"Barangay Info is up to date"})})).catch((function(e){return console.log(e)})),console.log(S)};return Object(o.jsxs)("div",{children:[Object(o.jsx)(x.a,{type:"primary",onClick:function(){s.setFieldsValue({id:e.info.id,barangayName:e.info.barangayName,location:e.info.location,barangayDescription:e.info.barangayDescription}),c(!0),B(!1)},children:"Edit"}),Object(o.jsx)(y.a,{title:"Update Barangay Info",confirmLoading:g,visible:n,onOk:w,onCancel:F,afterClose:function(){h||e.afterClosing()},destroyOnClose:!0,footer:[Object(o.jsx)(x.a,{onClick:F,children:"Cancel"},"back"),Object(o.jsx)(x.a,{form:"myForm",htmlType:"submit",type:"primary",children:"Update"})],children:Object(o.jsxs)(I.a,{name:"basic",form:s,initialValues:{remember:!0},onFinish:w,onFinishFailed:function(e){y.a.error({content:"Failure to Update Barangay Info"}),setTimeout((function(){c(!0),O(!1)}),2e3),console.log("Failed:",e)},onValuesChange:function(e,a){console.log("Changed",a,e),B(!0)},id:"myForm",children:[Object(o.jsx)(I.a.Item,{label:"Barangay Id",name:"id",children:Object(o.jsx)(l.a,{disabled:!0,bordered:!1})}),Object(o.jsx)(I.a.Item,{label:"Barangay Name",name:"barangayName",rules:[{required:!0,message:"Please input the Barangay's Name!"}],children:Object(o.jsx)(l.a,{})}),Object(o.jsx)(I.a.Item,{label:"Location",name:"location",rules:[{required:!0,message:"Please input Barangay's Location!"}],children:Object(o.jsx)(l.a,{})}),Object(o.jsx)(I.a.Item,{label:"Barangay Description",name:"barangayDescription",rules:[{required:!0,message:"Please input the Barangay's Description!"}],children:Object(o.jsx)(l.a.TextArea,{})})]})})]})},F=t(30),w=(t(46),t(495),t(194));var N=function(e){var a=Object(d.useState)({}),t=Object(j.a)(a,2),n=(t[0],t[1],Object(d.useState)(!1)),c=Object(j.a)(n,2),s=(c[0],c[1],Object(d.useState)("Choose file")),l=Object(j.a)(s,2),b=l[0],g=l[1],O=Object(d.useState)(""),m=Object(j.a)(O,2),f=m[0],h=m[1],v=Object(d.useState)("none"),C=Object(j.a)(v,2),k=C[0],D=C[1],N=Object(d.useState)(""),_=Object(j.a)(N,2),P=(_[0],_[1],Object(d.useState)([])),T=Object(j.a)(P,2),L=(T[0],T[1],Object(d.useState)([])),U=Object(j.a)(L,2),A=(U[0],U[1],Object(d.useState)(!1)),R=Object(j.a)(A,2),V=(R[0],R[1]),q=Object(d.useState)(!1),z=Object(j.a)(q,2),E=z[0],J=z[1],M=I.a.useForm(),G=Object(j.a)(M,1)[0],H=Object(d.useState)(!1),K=Object(j.a)(H,2),Q=K[0],W=K[1],X=function(){V(!0),setTimeout((function(){J(!1),W(!1)}),500)},Y=function(a){"done"==k?u.a.post("/api/v1/images/save_image",{imageOwnerId:e.info.id,imageReferenceId:1,imagePath:f}).then((function(e){w.b.success("Successfully Saved"),setTimeout((function(){J(!1),W(!1)}),500),h("")})).catch((function(e){return console.log(e)})):(w.b.error("Image Saving Error"),console.log("Uploaded image is removed"))},Z={name:"file",action:"/api/v1/images/add_image",headers:{authorization:"authorization-text"},onChange:function(e){"uploading"!==e.file.status&&console.log("uploading",e.file,e.fileList),"done"===e.file.status?w.b.success("".concat(e.file.name," file uploaded successfully")):"error"===e.file.status&&w.b.error("".concat(e.file.name," file upload failed.")),D(e.file.status),g(e)}};return Object(o.jsxs)("div",{children:[Object(o.jsx)(x.a,{type:"primary",onClick:function(){G.setFieldsValue({imageOwnerId:e.info.id,imageReferenceId:1}),h(),D("removed"),g("Choose file"),J(!0),console.log(e.info)},children:"Add Images"}),Object(o.jsxs)(y.a,{title:"Barangay Image Upload",confirmLoading:Q,visible:E,onOk:Y,onCancel:X,afterClose:function(){W(!0),V(!1)},destroyOnClose:!0,footer:[Object(o.jsx)(x.a,{type:"danger",onClick:X,children:"Close"},"back")],children:[Object(o.jsx)(i.a,{gutter:[16,16],children:Object(o.jsx)(r.b,{style:{width:"100%"},size:"large",children:Object(o.jsx)(S.a,Object(F.a)(Object(F.a)({},Z),{},{onRemove:function(e){u.a.delete("/api/v1/images/delete_folder_image",{params:{filePath:e.response.filePath}}).then((function(e){D("removed"),console.log(e.data)})).catch((function(e){return console.log(e)})),h()},listType:"picture",maxCount:1,children:Object(o.jsx)(x.a,{icon:Object(o.jsx)(B.a,{}),children:"Upload Image(Max: 1)"})}))})}),Object(o.jsx)(i.a,{gutter:[16,16],children:Object(o.jsx)(p.a,{width:250,height:250,src:"/api/v1/images/".concat(f||"logo.png"),style:{borderColor:"white",border:"10px"}})}),Object(o.jsx)(i.a,{gutter:[16,16],children:Object(o.jsx)(x.a,{onClick:function(){!function(){switch(k){case"done":return h(b.file.response.filePath),console.log("done");case"removed":return console.log("removed");case"":console.log("none")}}()},children:"Check Uploaded Image"})}),Object(o.jsx)(i.a,{children:Object(o.jsxs)(I.a,{name:"basic",form:G,initialValues:{remember:!0},onFinish:Y,onFinishFailed:function(e){console.log("fail"),console.log("Failed:",e)},children:[Object(o.jsx)(I.a.Item,{label:"Image Owner ID",name:"imageOwnerId",children:Object(o.jsx)("p",{children:Object(o.jsx)("h3",{children:e.info.id})})}),Object(o.jsx)(I.a.Item,{label:"Image Reference",name:"imageReferenceId",children:Object(o.jsx)("p",{children:Object(o.jsx)("h3",{children:"Barangay"})})}),Object(o.jsx)(I.a.Item,{children:Object(o.jsx)(x.a,{onClick:Y,type:"primary",children:f?"Save Image":"Choose an image"})})]})})]})]})};a.default=function(){var e=Object(d.useState)([]),a=Object(j.a)(e,2),t=a[0],b=a[1],g=l.a.Search,m=Object(d.useState)(""),h=Object(j.a)(m,2),p=h[0],x=h[1];Object(d.useEffect)((function(){u.a.get("/api/v1/barangays/search_all_barangays").then((function(e){console.log(e);var a=e.data;b(a)})).catch((function(e){return console.log(e)}))}),[]);var y=function(){console.log("Passed data from modal",p),u.a.get("/api/v1/barangays/search_all_barangays").then((function(e){console.log(e);var a=e.data;b(a)}))};return Object(o.jsxs)("div",{children:[Object(o.jsxs)(i.a,{justify:"space-between",children:[Object(o.jsx)(s.a,{span:4,children:Object(o.jsx)(r.b,{direction:"vertical",children:Object(o.jsx)(g,{placeholder:"Search Barangay",onSearch:function(e){u.a.post("/api/v1/barangays/search_barangays",{value:e}).then((function(e){console.log(e);var a=e.data;b(a),console.log("success")})),console.log(e)},allowClear:!0,enterButton:!0})})}),Object(o.jsx)(s.a,{span:4,children:Object(o.jsx)(k,{info:"",passedData:x,afterClosing:y})})]}),Object(o.jsx)(c.a,{orientation:"center",children:"List of Barangays"}),Object(o.jsx)(i.a,{children:Object(o.jsxs)(n.a,{dataSource:t,scroll:{x:1e3,y:500},sticky:!0,children:[Object(o.jsx)(O.a,{title:"Barangay Name",dataIndex:"barangayName"},"barangayName"),Object(o.jsx)(f.a,{title:"Location",dataIndex:"location"},"location"),Object(o.jsx)(f.a,{title:"Barangay Description",dataIndex:"barangayDescription"},"barangayDescription"),Object(o.jsx)(f.a,{title:"Actions",fixed:"right",render:function(e){return Object(o.jsxs)(r.b,{children:[Object(o.jsx)(C,{info:e,passedData:x,afterClosing:y}),Object(o.jsx)(D,{info:e,passedData:x,afterClosing:y}),Object(o.jsx)(N,{info:e})]})}},"actions")]})})]})}}}]);
//# sourceMappingURL=6.0d658fd5.chunk.js.map