(this["webpackJsonpretrack-admin"]=this["webpackJsonpretrack-admin"]||[]).push([[3],{156:function(e,t,n){},219:function(e,t,n){},389:function(e,t,n){"use strict";n.r(t);var a=n(5),s=n(0),c=n.n(s),r=n(27),i=n.n(r),o=(n(219),n.p,n(156),n(70)),l=n(31),j=n(30);var u=Object(l.g)((function(e){var t=e.component,n=e.Auth,s=(e.history,e.res);return Object(a.jsx)(l.b,Object(j.a)(Object(j.a)({},s),{},{render:function(e){return n.state.isAuthenticated&&"admin"==n.state.userData.myStatus?Object(a.jsx)(l.a,{to:{pathname:"/",state:{from:e.location}}}):Object(a.jsx)(t,{})}}))}));Object(l.g)((function(e){var t=e.component,n=e.Auth,s=(e.history,e.res);return console.log(n),Object(a.jsx)(l.b,Object(j.a)(Object(j.a)({},s),{},{render:function(e){return n.state.isAuthenticated&&"home"==n.state.userData.myStatus?Object(a.jsx)(t,{Auth:n}):Object(a.jsx)(l.a,{to:{pathname:"/login",state:{from:e.location}}})}}))}));var d=Object(l.g)((function(e){var t=e.component,n=e.Auth,s=(e.history,e.res);return console.log(n),Object(a.jsx)(l.b,Object(j.a)(Object(j.a)({},s),{},{render:function(e){return n.state.isAuthenticated&&"admin"==n.state.userData.myStatus?Object(a.jsx)(t,{}):Object(a.jsx)(l.a,{to:{pathname:"/login",state:{from:e.location}}})}}))})),b=n(66),O=n.n(b),h=n(94),x=n(100),m=function(e,t){switch(t.type){case"LOAD_TOKEN":return Object(j.a)(Object(j.a)({},e),{},{secureToken:t.secureToken,userData:t.userData,isAuthenticated:!0,isLoading:!1});case"LOADING":return Object(j.a)(Object(j.a)({},e),{},{isLoading:!1});case"LOAD_USER_DATA":default:return Object(j.a)({},e)}},p=n(88),f=n.n(p),g=Object(s.createContext)(),v={secureToken:"",isAuthenticated:!1,userData:{},isLoading:!0};function y(e){var t=e.children,n=Object(s.useReducer)(m,v),c=Object(x.a)(n,2),r=c[0],i=c[1],o=function(){var e=Object(h.a)(O.a.mark((function e(){var t,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),e.next=3,f.a.post("/api/v1/auths/",{token:t},{headers:{Authorization:"Bearer ".concat(t)}}).catch((function(e){console.log(e),localStorage.removeItem("token")}));case 3:n=e.sent,console.log(n),i(n?{type:"LOAD_TOKEN",secureToken:n.data.token,userData:n.data.userData}:{type:"LOADING"});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(s.useEffect)((function(){o()}),[]);var l=function(){var e=Object(h.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,f.a.post("/api/v1/auths/auth_login",Object(j.a)({},t)).catch((function(e){return e.response}));case 3:if(422!==(n=e.sent).status){e.next=8;break}return e.abrupt("return",{success:!1,errorMassage:"Invalid email or password"});case 8:if(200!==n.status){e.next=12;break}return localStorage.setItem("token",n.data.token),i({type:"LOAD_TOKEN",secureToken:n.data.secureToken,userData:n.data.userData}),e.abrupt("return",{success:!0});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)(g.Provider,{value:{state:r,authenticate:l},children:t})}console.log(v);n(99);var k=n(63),A=(n(245),n(72)),N=(n(248),n(76)),w=c.a.lazy((function(){return Promise.all([n.e(2),n.e(10)]).then(n.bind(null,494))}));var I=function(){return Object(a.jsx)("div",{children:Object(a.jsx)(s.Suspense,{fallback:Object(a.jsx)("h1",{children:"LOADING"}),children:Object(a.jsx)(w,{})})})},D=c.a.lazy((function(){return Promise.all([n.e(0),n.e(6)]).then(n.bind(null,497))}));var C=function(){return Object(a.jsx)("div",{children:Object(a.jsx)(s.Suspense,{fallback:Object(a.jsx)("h1",{children:"LOADING"}),children:Object(a.jsx)(D,{})})})},P=c.a.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(8)]).then(n.bind(null,499))})),S=n(392);var L=function(){return Object(a.jsx)("div",{children:Object(a.jsx)(s.Suspense,{fallback:Object(a.jsx)("div",{className:"icons-list",children:Object(a.jsx)(S.a,{spin:!0})}),children:Object(a.jsx)(P,{})})})},T=c.a.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(7)]).then(n.bind(null,498))}));var F=function(){return Object(a.jsx)("div",{children:Object(a.jsx)(s.Suspense,{fallback:Object(a.jsx)("div",{className:"icons-list",children:Object(a.jsx)(S.a,{spin:!0})}),children:Object(a.jsx)(T,{})})})},E=c.a.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(9)]).then(n.bind(null,500))}));var R=function(){return Object(a.jsx)("div",{children:Object(a.jsx)(s.Suspense,{fallback:Object(a.jsx)("div",{className:"icons-list",children:Object(a.jsx)(S.a,{spin:!0})}),children:Object(a.jsx)(E,{})})})},q=n(393),z=n(394),B=n(395),G=n(396),_=(n(207),n(146)),M=n.p+"static/media/logo.0d48cf5e.png";var U=function(){return Object(a.jsx)(_.a,{height:100,src:M,style:{borderColor:"white",border:"10px",borderRadius:"50%"}})},H=N.a.Header,J=N.a.Content,K=N.a.Footer,V=N.a.Sider;var W=function(){var e=Object(s.useState)(""),t=Object(x.a)(e,2),n=t[0],c=t[1],r=function(e){c(e)};return Object(a.jsx)("div",{children:Object(a.jsxs)(s.Suspense,{fallback:Object(a.jsx)("div",{className:"icons-list",children:Object(a.jsx)(S.a,{spin:!0})}),children:[Object(a.jsxs)(N.a,{children:[Object(a.jsxs)(V,{breakpoint:"lg",collapsedWidth:"0",onBreakpoint:function(e){console.log(e)},onCollapse:function(e,t){console.log(e,t)},children:[Object(a.jsx)("div",{className:"logo"}),Object(a.jsxs)(A.a,{theme:"dark",mode:"inline",defaultSelectedKeys:[""],children:[Object(a.jsx)(U,{}),Object(a.jsx)(A.a.Item,{icon:Object(a.jsx)(q.a,{}),onClick:function(){return r("1")},children:"Jeepneys"},"1"),Object(a.jsx)(A.a.Item,{icon:Object(a.jsx)(q.a,{}),onClick:function(){return r("2")},children:"Jeepney List"},"2"),Object(a.jsx)(A.a.Item,{icon:Object(a.jsx)(z.a,{}),onClick:function(){return r("3")},children:"Driver List"},"3"),Object(a.jsx)(A.a.Item,{icon:Object(a.jsx)(B.a,{}),onClick:function(){return r("4")},children:"Barangay List"},"4"),Object(a.jsx)(A.a.Item,{icon:Object(a.jsx)(z.a,{}),onClick:function(){return r("5")},children:"Image Upload"},"5")]})]}),Object(a.jsxs)(N.a,{children:[Object(a.jsx)(H,{className:"site-layout-sub-header-background",style:{padding:0,textAlign:"center"},children:Object(a.jsxs)("h1",{style:{color:"white"},children:["Retrack Admin",Object(a.jsx)(k.a,{onClick:function(){localStorage.clear()},href:"/login",type:"danger",icon:Object(a.jsx)(G.a,{}),style:{borderRadius:"10%",margin:"10px",float:"right",textAlign:"center"}})]})}),Object(a.jsx)(J,{style:{margin:"24px 16px 0"},children:Object(a.jsx)("div",{className:"site-layout-background",style:{padding:24,minHeight:500},children:function(){switch(n){case"1":return Object(a.jsx)(I,{});case"2":return Object(a.jsx)(R,{});case"3":return Object(a.jsx)(L,{});case"4":return Object(a.jsx)(F,{});case"5":return Object(a.jsx)(C,{});case"":return"Welcome"}}()})}),Object(a.jsx)(K,{style:{textAlign:"center"},children:"Ant Design \ufffd2018 Created by Ant UED"})]})]}),","]})})},Q=(n(123),n(56)),X=(n(124),n(44)),Y=(n(145),n(101)),Z=(n(144),n(48)),$=(n(122),n(58)),ee={labelCol:{span:8},wrapperCol:{span:16}},te={wrapperCol:{offset:8,span:16}};var ne=Object(l.g)((function(e){e.history;var t=Object(s.useContext)(g),n=function(){var e=Object(h.a)(O.a.mark((function e(n){var a,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Success:",n),console.log(n),e.next=4,t.authenticate(n);case 4:a=e.sent,s=a.success,a.errorMessage,console.log(s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)("div",{className:"loginCard",children:Object(a.jsx)(Q.a,{type:"flex",justify:"center",align:"middle",style:{minHeight:"80vh"},children:Object(a.jsx)(X.a,{children:Object(a.jsx)(Y.a,{title:"Retrack ADMIN",className:"loginCardStyle",children:Object(a.jsxs)("cardBody",{children:[Object(a.jsx)(U,{}),Object(a.jsxs)(Z.a,Object(j.a)(Object(j.a)({},ee),{},{name:"basic",initialValues:{remember:!0},onFinish:n,onFinishFailed:function(e){console.log("Failed:",e)},children:[Object(a.jsx)(Z.a.Item,{label:"Email",name:"email",rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your Email!"}],children:Object(a.jsx)($.a,{})}),Object(a.jsx)(Z.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}],children:Object(a.jsx)($.a.Password,{})}),Object(a.jsx)("a",{style:{float:"right"},href:"/register",children:"Need Account?"}),Object(a.jsx)(Z.a.Item,Object(j.a)(Object(j.a)({},te),{},{children:Object(a.jsx)(k.a,{type:"primary",htmlType:"submit",shape:"round",className:"form-button",children:"LOGIN"})}))]}))]})})})})})})),ae=(n(208),n(138));ae.a.Title,ae.a.Text;var se=Object(l.g)((function(e){var t=e.history;return Object(a.jsx)("div",{className:"registerCard",children:Object(a.jsx)(Q.a,{type:"flex",justify:"center",align:"middle",style:{minHeight:"90vh"},children:Object(a.jsx)(X.a,{children:Object(a.jsxs)(Y.a,{title:"Retrack ADMIN",className:"loginCardStyle",children:[Object(a.jsx)(U,{}),Object(a.jsxs)(Z.a,{name:"basic",initialValues:{remember:!0},onFinish:function(e){console.log(e),console.log(e),f.a.post("/api/v1/users/register",e).then((function(e){t.push("/login")})).catch((function(e){return console.log(e)}))},onFinishFailed:function(e){console.log("fail"),console.log("Failed:",e)},children:[Object(a.jsx)("h4",{children:"Admin Account Registration"}),Object(a.jsx)(Z.a.Item,{label:"First Name",name:"firstName",rules:[{required:!0,message:"Please input your First Name!"}],children:Object(a.jsx)($.a,{})}),Object(a.jsx)(Z.a.Item,{label:"Last Name",name:"lastName",rules:[{required:!0,message:"Please input your Last Name!"}],children:Object(a.jsx)($.a,{})}),Object(a.jsx)(Z.a.Item,{label:"Email",name:"email",rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your email!"}],children:Object(a.jsx)($.a,{})}),Object(a.jsx)(Z.a.Item,{name:"password",label:"Password",rules:[{required:!0,message:"Please input your password!"}],hasFeedback:!0,children:Object(a.jsx)($.a.Password,{})}),Object(a.jsx)(Z.a.Item,{name:"confirm",label:"Confirm Password",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:"Please confirm your password!"},function(e){var t=e.getFieldValue;return{validator:function(e,n){return n&&t("password")!==n?Promise.reject("The two passwords that you entered do not match!"):Promise.resolve()}}}],children:Object(a.jsx)($.a.Password,{})}),Object(a.jsx)(Z.a.Item,{children:Object(a.jsx)(k.a,{type:"primary",htmlType:"submit",shape:"round",className:"form-button",children:"REGISTER"})})]})]})})})})}));var ce=function(){var e=Object(s.useContext)(g);return console.log(e),Object(a.jsx)(c.a.Fragment,{children:!e.state.isLoading&&Object(a.jsx)(o.a,{children:Object(a.jsxs)(l.d,{children:[Object(a.jsx)(u,{Auth:e,path:"/login",component:ne,exact:!0}),Object(a.jsx)(d,{Auth:e,path:"/",component:W,exact:!0}),Object(a.jsx)(u,{Auth:e,path:"/register",component:se,exact:!0}),Object(a.jsx)(l.b,{component:function(){return Object(a.jsx)("h1",{children:"URL NOT FOUND"})}})]})})})},re=function(e){e&&e instanceof Function&&n.e(12).then(n.bind(null,495)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),a(e),s(e),c(e),r(e)}))};i.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(y,{children:Object(a.jsx)(ce,{})})}),document.getElementById("root")),re()}},[[389,4,5]]]);
//# sourceMappingURL=main.2562b7be.chunk.js.map