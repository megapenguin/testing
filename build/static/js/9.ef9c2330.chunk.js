(this["webpackJsonpretrack-admin"]=this["webpackJsonpretrack-admin"]||[]).push([[9],{500:function(e,t,a){"use strict";a.r(t);a(413);var n=a(410),c=(a(406),a(407)),i=(a(123),a(56)),o=a(5),s=(a(124),a(44)),r=(a(399),a(402)),l=a(30),j=(a(122),a(59)),b=a(100),d=a(0),u=a(88),O=a.n(u),f=a(408),p=a.n(f),h=a(409),g=a.n(h),m=(a(145),a(101)),x=(a(207),a(146)),y=(a(99),a(63)),v=(a(400),a(401)),C=a(397);var S=function(e){var t=Object(d.useState)(!1),a=Object(b.a)(t,2),n=a[0],c=a[1],i=Object(d.useState)(""),s=Object(b.a)(i,2),l=(s[0],s[1],Object(d.useState)(!1)),j=Object(b.a)(l,2),u=j[0],f=j[1],p=Object(d.useState)(!1),h=Object(b.a)(p,2),g=h[0],S=h[1],I=Object(d.useState)([]),N=Object(b.a)(I,2),J=N[0],k=N[1],w=Object(d.useState)([]),P=Object(b.a)(w,2),_=P[0],F=P[1],A=Object(d.useState)([]),T=Object(b.a)(A,2),B=T[0],D=T[1];return Object(d.useEffect)((function(){O.a.get("/api/v1/images/").then((function(e){var t=e.data;F(t)})).catch((function(e){return console.log(e)}))}),[]),Object(o.jsxs)("div",{children:[Object(o.jsx)(r.b,{children:Object(o.jsx)(y.a,{type:"primary",onClick:function(){c(!0),O.a.get("/api/v1/images/").then((function(t){var a=Object(C.a)(_);a=a.find((function(t){return t.imageOwnerId===e.info.id&&3===t.imageReferenceId})),D(a.imagePath)})).catch((function(e){return console.log(e)}))},children:"View"})}),Object(o.jsxs)(v.a,{title:"Jeepney Information",visible:n,confirmLoading:u,onOk:function(){e.passedData(e.info),f(!0),S(!1),setTimeout((function(){c(!1),f(!1)}),2e3)},onCancel:function(){S(!0),c(!1)},afterClose:function(){g||e.afterClosing()},footer:[Object(o.jsx)(y.a,{loading:u,onClick:function(){return t=e.info.id,f(!0),S(!1),setTimeout((function(){c(!1),f(!1)}),2e3),O.a.delete("/api/v1/images/delete_image",{params:{id:t,referenceId:3}}).then((function(e){var a=Object(C.a)(_);a=a.filter((function(e){return e.imageOwnerId!==t&&3===e.imageReferenceId})),F(a),console.log(a)})).catch((function(e){return console.log(e)})),void O.a.delete("/api/v1/jeepneys/delete_jeep",{params:{id:t}}).then((function(e){var a=Object(C.a)(J);a=a.filter((function(e){return e.id!==t})),k(a),console.log(a),v.a.success({content:"Jeepney has been Removed"})})).catch((function(e){return console.log(e)}));var t},danger:!0,children:"Remove"})],children:[Object(o.jsxs)("p",{children:[Object(o.jsx)("h3",{children:"Barangay Id:"}),e.info.barangayId]}),Object(o.jsxs)("p",{children:[Object(o.jsx)("h3",{children:"Plate Number:"}),e.info.plateNumber]}),Object(o.jsxs)("p",{children:[Object(o.jsx)("h3",{children:"Jeep Capacity:"}),e.info.jeepCapacity]}),Object(o.jsx)("h3",{children:"Uploaded Images: "}),Object(o.jsx)(m.a,{className:"shadow-sm",children:Object(o.jsx)(x.a,{height:100,src:"/api/v1/images/".concat(B),style:{borderColor:"white",border:"10px"}})})]})]})},I=(a(405),a(404)),N=(a(144),a(49)),J=(a(424),a(411)),k=a(501);var w=function(e){var t=Object(d.useState)(!1),a=Object(b.a)(t,2),n=a[0],c=a[1],i=Object(d.useState)(""),s=Object(b.a)(i,2),r=(s[0],s[1],Object(d.useState)(!1)),l=Object(b.a)(r,2),u=l[0],f=l[1],p=Object(d.useState)(!1),h=Object(b.a)(p,2),g=h[0],m=h[1],x=Object(d.useState)([]),S=Object(b.a)(x,2),w=S[0],P=S[1],_=Object(d.useState)({}),F=Object(b.a)(_,2),A=F[0],T=(F[1],Object(d.useState)("Choose file")),B=Object(b.a)(T,2),D=(B[0],B[1]),R=Object(d.useState)(),q=Object(b.a)(R,2),E=q[0],L=(q[1],Object(d.useState)([])),V=Object(b.a)(L,2),U=V[0],M=V[1];Object(d.useEffect)((function(){O.a.get("/api/v1/barangays/search_all_barangays").then((function(e){console.log(e);var t=e.data;M(t)})).catch((function(e){return console.log(e)}))}),[]);var z=J.a.Option,G=function(){m(!0),c(!1)},H=function(t){console.log(t),e.passedData(e.info),f(!0),m(!1),setTimeout((function(){c(!1),f(!1)}),2e3),O.a.post("/api/v1/jeepneys/add_jeep",t).then((function(e){var t=Object(C.a)(w);t=[].concat(Object(C.a)(t),[e.data]),console.log(t),P(t),v.a.success({content:"Successfully Added New Jeepney"}),O.a.post("/api/v1/images/save_image",{imageOwnerId:e.data.id,imageReferenceId:3,imagePath:E})})).catch((function(e){return console.log(e)}))};return Object(o.jsxs)("div",{children:[Object(o.jsx)(y.a,{type:"primary",onClick:function(){c(!0),console.log(e.info)},children:"Add Jeepney"}),Object(o.jsx)(v.a,{title:"Add Jeepney:",visible:n,confirmLoading:u,onOk:H,onCancel:G,afterClose:function(){g||e.afterClosing()},destroyOnClose:!0,footer:[Object(o.jsx)(y.a,{onClick:G,children:"Cancel"},"back"),Object(o.jsx)(y.a,{form:"myForm",htmlType:"submit",type:"primary",loading:u,onClick:H,children:"Add"},"submit")],children:Object(o.jsxs)(N.a,{name:"basic",initialValues:{remember:!0},onFinish:H,onFinishFailed:function(e){v.a.error({content:"Failure to Add New Jeepney"}),setTimeout((function(){c(!0),f(!1)}),2e3),console.log("fail"),console.log("Failed:",e)},id:"myForm",children:[Object(o.jsx)(N.a.Item,{label:"Barangay",name:"barangayId",rules:[{required:!0,message:"Please input the Barangay's ID!"}],children:Object(o.jsx)(J.a,{defaultValue:"-Select-",style:{width:120},onChange:function(e){console.log("selected ".concat(e))},children:U.map((function(e,t){return Object(o.jsx)(z,{value:e.id,children:e.barangayName})}))})}),Object(o.jsx)(N.a.Item,{label:"Plate Number",name:"plateNumber",rules:[{required:!0,message:"Please input the Plate Number!"}],children:Object(o.jsx)(j.a,{})}),Object(o.jsx)(N.a.Item,{label:"Jeep Capacity",name:"jeepCapacity",rules:[{required:!0,message:"Please input the Jeep Capacity!"}],children:Object(o.jsx)(j.a,{})}),Object(o.jsx)(I.a,{action:"/api/v1/images/add_image",listType:"picture",maxCount:1,file:A,onChange:function(e){D(e)},children:Object(o.jsx)(y.a,{icon:Object(o.jsx)(k.a,{}),children:"Upload Image (Max: 1)"})})]})})]})};t.default=function(){var e=Object(d.useState)([]),t=Object(b.a)(e,2),a=t[0],u=t[1],f=j.a.Search,h=Object(d.useState)(""),m=Object(b.a)(h,2),x=m[0],y=m[1];Object(d.useEffect)((function(){O.a.get("/api/v1/jeepneys/").then((function(e){console.log(e);var t=e.data;t=t.map((function(e){return console.log("test",e),Object(l.a)(Object(l.a)({},e),{},{barangayName:e.barangay.barangayName})})),console.log("test2",t),u(t)})).catch((function(e){return console.log(e)}))}),[]);var v=function(){console.log("Passed data from modal",x),O.a.get("/api/v1/jeepneys/search_all_jeepneys").then((function(e){console.log(e);var t=e.data;u(t)}))};return Object(o.jsxs)("div",{children:[Object(o.jsxs)(i.a,{justify:"space-between",children:[Object(o.jsx)(s.a,{span:4,children:Object(o.jsx)(r.b,{direction:"vertical",children:Object(o.jsx)(f,{placeholder:"Search Jeepney",onSearch:function(e){O.a.post("/api/v1/jeepneys/search_jeepneys",{value:e}).then((function(e){console.log(e);var t=e.data;u(t),console.log("success")})),console.log(e)},allowClear:!0,enterButton:!0})})}),Object(o.jsx)(s.a,{span:4,children:Object(o.jsx)(w,{info:"",passedData:y,afterClosing:v})})]}),Object(o.jsx)(c.a,{orientation:"center",children:"List of Jeepneys"}),Object(o.jsx)(i.a,{children:Object(o.jsxs)(n.a,{dataSource:a,scroll:{x:1e3,y:500},sticky:!0,children:[Object(o.jsx)(p.a,{title:"Barangay",dataIndex:"barangayName"},"barangayId"),Object(o.jsx)(g.a,{title:"Plate Number",dataIndex:"plateNumber"},"plateNumber"),Object(o.jsx)(g.a,{title:"Jeep Capacity",dataIndex:"jeepCapacity"},"jeepCapacity"),Object(o.jsx)(g.a,{title:"Actions",fixed:"right",render:function(e){return Object(o.jsx)(r.b,{children:Object(o.jsx)(S,{info:e,passedData:y,afterClosing:v})})}},"actions")]})})]})}}}]);
//# sourceMappingURL=9.ef9c2330.chunk.js.map