(this["webpackJsonpretrack-admin"]=this["webpackJsonpretrack-admin"]||[]).push([[9],{494:function(e,t,a){"use strict";a.r(t);a(408);var n=a(407),s=(a(403),a(404)),c=(a(123),a(56)),i=a(5),r=(a(124),a(44)),o=(a(400),a(402)),l=(a(122),a(58)),d=a(99),j=a(0),b=a(88),u=a.n(b),m=a(405),O=a.n(m),f=a(406),h=a.n(f),x=(a(121),a(75)),v=(a(398),a(399)),p=a(396);var g=function(e){var t=Object(j.useState)(!1),a=Object(d.a)(t,2),n=a[0],s=a[1],c=Object(j.useState)(""),r=Object(d.a)(c,2),o=(r[0],r[1],Object(j.useState)(!1)),l=Object(d.a)(o,2),b=l[0],m=l[1],O=Object(j.useState)(!1),f=Object(d.a)(O,2),h=f[0],g=f[1],N=Object(j.useState)([]),y=Object(d.a)(N,2),C=y[0],S=y[1];return Object(i.jsxs)("div",{children:[Object(i.jsx)(x.a,{type:"primary",onClick:function(){s(!0),console.log(e.info)},children:"View"}),Object(i.jsxs)(v.a,{title:"Driver Information",visible:n,confirmLoading:b,onOk:function(){e.passedData(e.info),m(!0),g(!1),setTimeout((function(){s(!1),m(!1)}),2e3)},onCancel:function(){g(!0),s(!1)},afterClose:function(){h||e.afterClosing()},footer:[Object(i.jsx)(x.a,{loading:b,onClick:function(){return t=e.info.id,m(!0),g(!1),setTimeout((function(){s(!1),m(!1)}),2e3),void u.a.delete("/api/v1/drivers/delete_driver",{params:{id:t}}).then((function(e){var a=Object(p.a)(C);a=a.filter((function(e){return e.id!==t})),S(a),console.log(a),v.a.success({content:"Driver has been Removed"})})).catch((function(e){return console.log(e)}));var t},danger:!0,children:"Remove"})],children:[Object(i.jsxs)("p",{children:[Object(i.jsx)("h3",{children:"ID:"}),e.info.id]}),Object(i.jsxs)("p",{children:[Object(i.jsx)("h3",{children:"Name:"}),e.info.firstName," ",e.info.middleName," ",e.info.lastName]}),Object(i.jsxs)("p",{children:[Object(i.jsx)("h3",{children:"Contact Number:"}),e.info.contactNumber]}),Object(i.jsxs)("p",{children:[Object(i.jsx)("h3",{children:"Address: "}),e.info.address]}),Object(i.jsxs)("p",{children:[Object(i.jsx)("h3",{children:"Email Address: "}),e.info.email]})]})]})},N=(a(144),a(49));var y=function(e){var t=Object(j.useState)(!1),a=Object(d.a)(t,2),n=a[0],s=a[1],c=Object(j.useState)(""),r=Object(d.a)(c,2),o=(r[0],r[1],Object(j.useState)(!1)),b=Object(d.a)(o,2),m=b[0],O=b[1],f=Object(j.useState)(!1),h=Object(d.a)(f,2),g=h[0],y=h[1],C=Object(j.useState)([]),S=Object(d.a)(C,2),I=S[0],k=S[1],D=function(){y(!0),s(!1)},A=function(t){console.log(t),e.passedData(e.info),O(!0),y(!1),setTimeout((function(){s(!1),O(!1)}),2e3),u.a.post("/api/v1/drivers/add_driver",t).then((function(e){var t=Object(p.a)(I);t=[].concat(Object(p.a)(t),[e.data]),console.log(t),k(t),v.a.success({content:"Successfully Added New Driver"})})).catch((function(e){return console.log(e)}))};return Object(i.jsxs)("div",{children:[Object(i.jsx)(x.a,{type:"primary",onClick:function(){s(!0),console.log(e.info)},children:"Add Driver"}),Object(i.jsx)(v.a,{title:"Add Driver:",visible:n,confirmLoading:m,onOk:A,onCancel:D,afterClose:function(){g||e.afterClosing()},destroyOnClose:!0,footer:[Object(i.jsx)(x.a,{onClick:D,children:"Cancel"},"back"),Object(i.jsx)(x.a,{form:"myForm",htmlType:"submit",type:"primary",loading:m,onClick:A,children:"Add"},"submit")],children:Object(i.jsxs)(N.a,{name:"basic",initialValues:{remember:!0},onFinish:A,onFinishFailed:function(e){v.a.error({content:"Failure to Add New Driver"}),setTimeout((function(){s(!0),O(!1)}),2e3),console.log("fail"),console.log("Failed:",e)},id:"myForm",children:[Object(i.jsx)(N.a.Item,{label:"First Name",name:"firstName",rules:[{required:!0,message:"Please input your Firstname!"}],children:Object(i.jsx)(l.a,{})}),Object(i.jsx)(N.a.Item,{label:"Middle Name",name:"middleName",rules:[{required:!0,message:"Please input your Middlename!"}],children:Object(i.jsx)(l.a,{})}),Object(i.jsx)(N.a.Item,{label:"Last Name",name:"lastName",rules:[{required:!0,message:"Please input your Lastname!"}],children:Object(i.jsx)(l.a,{})}),Object(i.jsx)(N.a.Item,{label:"Address",name:"address",rules:[{required:!0,message:"Please input your Address!"}],children:Object(i.jsx)(l.a,{})}),Object(i.jsx)(N.a.Item,{label:"Contact Number",name:"contactNumber",rules:[{required:!0,message:"Please input your Contact Number!"}],children:Object(i.jsx)(l.a,{})}),Object(i.jsx)(N.a.Item,{label:"Generate Password",name:"generatePassword",rules:[{required:!0,message:"Please input your password!"}],children:Object(i.jsx)(l.a,{})}),Object(i.jsx)(N.a.Item,{label:"Email",name:"email",rules:[{required:!0,type:"email",message:"Please input your Email!"}],children:Object(i.jsx)(l.a,{})})]})})]})};t.default=function(){var e=Object(j.useState)([]),t=Object(d.a)(e,2),a=t[0],b=t[1],m=l.a.Search,f=Object(j.useState)(""),x=Object(d.a)(f,2),v=x[0],p=x[1];Object(j.useEffect)((function(){u.a.get("/api/v1/drivers/").then((function(e){console.log(e);var t=e.data;b(t)})).catch((function(e){return console.log(e)}))}),[]);var N=function(){console.log("Passed data from modal",v),u.a.get("/api/v1/drivers/").then((function(e){console.log(e);var t=e.data;b(t)}))};return Object(i.jsxs)("div",{children:[Object(i.jsxs)(c.a,{justify:"space-between",children:[Object(i.jsx)(r.a,{span:4,children:Object(i.jsx)(o.b,{direction:"vertical",children:Object(i.jsx)(m,{placeholder:"Search Drivers",onSearch:function(e){u.a.post("/api/v1/drivers/search_drivers",{value:e}).then((function(e){console.log(e);var t=e.data;b(t),console.log("success")})),console.log(e)},allowClear:!0,enterButton:!0})})}),Object(i.jsx)(r.a,{span:4,children:Object(i.jsx)(y,{info:"",passedData:p,afterClosing:N})})]}),Object(i.jsx)(s.a,{orientation:"center",children:"List of Drivers"}),Object(i.jsx)(c.a,{children:Object(i.jsxs)(n.a,{dataSource:a,scroll:{x:1e3,y:500},sticky:!0,children:[Object(i.jsx)(O.a,{title:"Firstname",dataIndex:"firstName"},"firstName"),Object(i.jsx)(O.a,{title:"Middlename",dataIndex:"middleName"},"middleName"),Object(i.jsx)(O.a,{title:"Lastname",dataIndex:"lastName"},"lastName"),Object(i.jsx)(h.a,{title:"Contact",dataIndex:"contactNumber"},"contactNumber"),Object(i.jsx)(h.a,{title:"Address",dataIndex:"address"},"address"),Object(i.jsx)(h.a,{title:"Email",dataIndex:"email"},"email"),Object(i.jsx)(h.a,{title:"Actions",fixed:"right",render:function(e){return Object(i.jsx)(o.b,{children:Object(i.jsx)(g,{info:e,passedData:p,afterClosing:N})})}},"actions")]})})]})}}}]);
//# sourceMappingURL=9.37d886a5.chunk.js.map