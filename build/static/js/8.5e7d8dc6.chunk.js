(this["webpackJsonpretrack-admin"]=this["webpackJsonpretrack-admin"]||[]).push([[8],{483:function(e,t,a){},489:function(e,t,a){"use strict";a.r(t);a(130);var n=a(61),c=(a(133),a(43)),r=(a(153),a(106)),i=(a(415),a(414)),l=(a(407),a(408)),s=(a(213),a(131)),o=(a(409),a(410)),d=(a(91),a(49)),u=a(4),b=(a(47),a(483),a(3)),j=a.n(b),p=a(1),m=a.n(p),f=a(8),O=a.n(f),v=a(0),y=a(5),h=a.n(y),g=a(28),x=a(67),N=a.n(x),C=a(53),k=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var c=0;for(n=Object.getOwnPropertySymbols(e);c<n.length;c++)t.indexOf(n[c])<0&&Object.prototype.propertyIsEnumerable.call(e,n[c])&&(a[n[c]]=e[n[c]])}return a},S=function(e){var t,a=e.prefixCls,n=e.className,c=e.checked,r=e.onChange,i=e.onClick,l=k(e,["prefixCls","className","checked","onChange","onClick"]),s=(0,v.useContext(C.b).getPrefixCls)("tag",a),o=h()(s,(t={},j()(t,"".concat(s,"-checkable"),!0),j()(t,"".concat(s,"-checkable-checked"),c),t),n);return v.createElement("span",m()({},l,{className:o,onClick:function(e){r&&r(!c),i&&i(e)}}))},I=a(179),w=a(181),E=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var c=0;for(n=Object.getOwnPropertySymbols(e);c<n.length;c++)t.indexOf(n[c])<0&&Object.prototype.propertyIsEnumerable.call(e,n[c])&&(a[n[c]]=e[n[c]])}return a},P=new RegExp("^(".concat(I.a.join("|"),")(-inverse)?$")),A=new RegExp("^(".concat(I.b.join("|"),")$")),D=function(e,t){var a,n=e.prefixCls,c=e.className,r=e.style,i=e.children,l=e.icon,s=e.color,o=e.onClose,d=e.closeIcon,u=e.closable,b=void 0!==u&&u,p=E(e,["prefixCls","className","style","children","icon","color","onClose","closeIcon","closable"]),f=v.useContext(C.b),y=f.getPrefixCls,x=f.direction,k=v.useState(!0),S=O()(k,2),I=S[0],D=S[1];v.useEffect((function(){"visible"in p&&D(p.visible)}),[p.visible]);var R=function(){return!!s&&(P.test(s)||A.test(s))},J=m()({backgroundColor:s&&!R()?s:void 0},r),L=R(),T=y("tag",n),_=h()(T,(a={},j()(a,"".concat(T,"-").concat(s),L),j()(a,"".concat(T,"-has-color"),s&&!L),j()(a,"".concat(T,"-hidden"),!I),j()(a,"".concat(T,"-rtl"),"rtl"===x),a),c),z=function(e){e.stopPropagation(),o&&o(e),e.defaultPrevented||"visible"in p||D(!1)},B="onClick"in p||i&&"a"===i.type,F=Object(g.default)(p,["visible"]),M=l||null,H=M?v.createElement(v.Fragment,null,M,v.createElement("span",null,i)):i,$=v.createElement("span",m()({},F,{ref:t,className:_,style:J}),H,b?d?v.createElement("span",{className:"".concat(T,"-close-icon"),onClick:z},d):v.createElement(N.a,{className:"".concat(T,"-close-icon"),onClick:z}):null);return B?v.createElement(w.a,null,$):$},R=v.forwardRef(D);R.displayName="Tag",R.CheckableTag=S;var J=R,L=a(38),T=(a(152),a(105)),_=(a(132),a(62)),z=a(104),B={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"},F=a(48),M=function(e,t){return v.createElement(F.a,Object.assign({},e,{ref:t,icon:B}))};M.displayName="CheckOutlined";var H=v.forwardRef(M),$={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 00203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z"}}]},name:"close",theme:"outlined"},U=function(e,t){return v.createElement(F.a,Object.assign({},e,{ref:t,icon:$}))};U.displayName="CloseOutlined";var q=v.forwardRef(U),G=a(92),K=a.n(G);t.default=function(){var e=Object(v.useState)([]),t=Object(z.a)(e,2),a=t[0],b=t[1],j=Object(v.useState)([]),p=Object(z.a)(j,2),m=(p[0],p[1]),f=Object(v.useState)(0),O=Object(z.a)(f,2),y=(O[0],O[1],Object(v.useState)([])),h=Object(z.a)(y,2),g=h[0],x=h[1],N=Object(v.useState)([]),C=Object(z.a)(N,2),k=(C[0],C[1],Object(v.useState)([])),S=Object(z.a)(k,2),I=S[0],w=S[1],E=Object(v.useState)([]),P=Object(z.a)(E,2),A=(P[0],P[1],Object(v.useState)()),D=Object(z.a)(A,2),R=(D[0],D[1]),B=Object(v.useState)(),F=Object(z.a)(B,2),M=F[0],$=F[1],U=(_.a.Search,T.a.Text,T.a.Title);Object(v.useEffect)((function(){K.a.get("/api/v1/jeepneys/").then((function(e){var t=e.data;t=t.map((function(e){return null===e.barangay?Object(L.a)(Object(L.a)({},e),{},{barangayName:"None Assigned"}):Object(L.a)(Object(L.a)({},e),{},{barangayName:e.barangay.barangayName})})),b(t)})),K.a.get("/api/v1/drivers/").then((function(e){var t=e.data;t=(t=t.map((function(e){return Object(L.a)(Object(L.a)({},e),{},{jeepId:e.jeepneydrivers.map((function(e){return e.jeepneyId}))})}))).map((function(e){return Object(L.a)(Object(L.a)({},e),{},{plateNumber:e.jeepneydrivers.map((function(e){return e.jeepney.plateNumber}))})})),w(t)})).catch((function(e){return console.log(e)}))}),[]);var G=[{title:"Plate Number",dataIndex:"plateNumber"},{title:"Barangay",dataIndex:"barangayName"},{title:"Jeep Capacity",dataIndex:"jeepCapacity"},{title:"Status",render:function(e,t){return Object(u.jsx)(u.Fragment,{children:0!==e.jeepneyDriver.length?Object(u.jsx)(J,{color:"volcano",children:"Unavailable"}):Object(u.jsx)(J,{color:"blue",children:"Available"})})}}],Q=[{title:"Firstname",dataIndex:"firstName"},{title:"Middlename",dataIndex:"middleName"},{title:"Lastname",dataIndex:"lastName"},{title:"Jeep",dataIndex:"plateNumber"},{title:"Actions",key:"action",render:function(e,t){return Object(u.jsx)(o.b,{size:"middle",children:0===t.jeepId.length?Object(u.jsxs)(d.a,{onClick:function(){return X(g,t.id)},type:"primary",className:"modal-button-view",children:[Object(u.jsxs)("span",{className:"desktop-view",children:[Object(u.jsx)(H,{})," Assign Driver"]}),Object(u.jsx)("span",{className:"mobile-view",children:Object(u.jsx)(H,{})})]}):Object(u.jsxs)(d.a,{onClick:function(){return Y(t.id)},type:"danger",className:"modal-button",children:[Object(u.jsxs)("span",{className:"desktop-view",children:[Object(u.jsx)(q,{})," Remove Driver"]}),Object(u.jsx)("span",{className:"mobile-view",children:Object(u.jsx)(q,{})})]})})}}],V=a.map((function(e,t){return{key:t,id:e.id,plateNumber:e.plateNumber,jeepCapacity:e.jeepCapacity,jeepneyDriver:e.jeepneydrivers,barangayName:e.barangayName}})),W=I.map((function(e,t){return{key:t,id:e.id,jeepId:e.jeepId,firstName:e.firstName,middleName:e.middleName,lastName:e.lastName,email:e.email,address:e.address,contactNumber:e.contactNumber,plateNumber:e.plateNumber}})),X=function(e,t){!0===M?K.a.post("/api/v1/jeepneydrivers/add_jeepney_driver",{driverId:t,jeepneyId:e}).then((function(e){K.a.get("/api/v1/drivers/").then((function(e){var t=e.data;t=(t=t.map((function(e){return Object(L.a)(Object(L.a)({},e),{},{jeepId:e.jeepneydrivers.map((function(e){return e.jeepneyId}))})}))).map((function(e){return Object(L.a)(Object(L.a)({},e),{},{plateNumber:e.jeepneydrivers.map((function(e){return e.jeepney.plateNumber}))})})),$(!1),w(t),s.a.success({content:"Successfully Assigned Driver"})})),K.a.get("/api/v1/jeepneys/").then((function(e){var t=e.data;t=t.map((function(e){return Object(L.a)(Object(L.a)({},e),{},{barangayName:e.barangay.barangayName})})),b(t)}))})).catch((function(e){return console.log(e)})):s.a.error({content:"Select from available jeepneys"})},Y=function(e){K.a.delete("/api/v1/jeepneydrivers/delete_jeepney_driver",{params:{driverId:e}}).then((function(e){K.a.get("/api/v1/drivers/").then((function(e){var t=e.data;t=(t=t.map((function(e){return Object(L.a)(Object(L.a)({},e),{},{jeepId:e.jeepneydrivers.map((function(e){return e.jeepneyId}))})}))).map((function(e){return Object(L.a)(Object(L.a)({},e),{},{plateNumber:e.jeepneydrivers.map((function(e){return e.jeepney.plateNumber}))})})),$(!0),w(t),s.a.success({content:"Successfully Removed Driver from Assigned Jeepney"})})),K.a.get("/api/v1/jeepneys/").then((function(e){var t=e.data;t=t.map((function(e){return Object(L.a)(Object(L.a)({},e),{},{barangayName:e.barangay.barangayName})})),b(t)}))})).catch((function(e){return console.log(e)}))},Z={onChange:function(e,t){},hideSelectAll:!0,onSelect:function(e,t,a){R(e.key),$(t),x(e.id),m(e)},getCheckboxProps:function(e){return{disabled:0!==e.jeepneyDriver.length}}};return Object(u.jsxs)("div",{children:[Object(u.jsxs)(n.a,{align:"top",gutter:32,children:[Object(u.jsx)(l.a,{children:Object(u.jsx)(U,{level:4,children:"Assign Drivers"})}),Object(u.jsx)(c.a,{flex:"auto",children:Object(u.jsxs)(r.a,{bordered:!1,children:[Object(u.jsx)(U,{level:5,children:"Availabe Jeepneys"}),Object(u.jsx)(i.a,{bordered:!0,rowSelection:Object(L.a)({type:"radio"},Z),columns:G,dataSource:V,scroll:{x:300,y:500}})]})})]}),Object(u.jsx)(U,{level:5,children:"Drivers"}),Object(u.jsx)(n.a,{gutter:16,children:Object(u.jsx)(c.a,{children:Object(u.jsx)(r.a,{bordered:!1,children:Object(u.jsx)(i.a,{bordered:!0,columns:Q,dataSource:W,scroll:{y:500}})})})})]})}}}]);
//# sourceMappingURL=8.5e7d8dc6.chunk.js.map