(this["webpackJsonpretrack-admin"]=this["webpackJsonpretrack-admin"]||[]).push([[9],{489:function(e,t,a){"use strict";a.r(t);a(413);var s=a(412),n=(a(408),a(409)),i=(a(130),a(61)),c=a(4),r=(a(133),a(43)),l=(a(406),a(407)),o=(a(132),a(62)),d=a(104),j=a(0),m=a(92),b=a.n(m),u=a(410),O=a.n(u),f=a(411),h=a.n(f),x=(a(152),a(105)),p=(a(214),a(153)),v=(a(91),a(48)),g=(a(213),a(131)),N=a(416),I=a(483);var y=function(e){var t=Object(j.useState)(!1),a=Object(d.a)(t,2),s=a[0],n=a[1],l=Object(j.useState)(""),o=Object(d.a)(l,2),m=(o[0],o[1],Object(j.useState)(!1)),u=Object(d.a)(m,2),O=u[0],f=u[1],h=Object(j.useState)(!1),y=Object(d.a)(h,2),C=y[0],S=y[1],w=Object(j.useState)([]),D=Object(d.a)(w,2),k=D[0],F=D[1],P=Object(j.useState)([]),q=Object(d.a)(P,2),A=q[0],L=q[1],T=Object(j.useState)([]),_=Object(d.a)(T,2);return _[0],_[1],Object(c.jsxs)("div",{children:[Object(c.jsxs)(v.a,{type:"primary",className:"modal-button",onClick:function(){n(!0),b.a.post("/api/v1/images/search_images",{imageOwnerId:e.info.id,imageReferenceId:2}).then((function(e){var t=e.data;L(t)})).catch((function(e){return console.log(e)}))},children:[Object(c.jsxs)("span",{className:"desktop-view",children:[Object(c.jsx)(I.a,{})," View"]}),Object(c.jsx)("span",{className:"mobile-view",children:Object(c.jsx)(I.a,{})})]}),Object(c.jsxs)(g.a,{title:"Driver Information",visible:s,confirmLoading:O,onOk:function(){e.passedData(e.info),f(!0),S(!1),setTimeout((function(){n(!1),f(!1)}),2e3)},onCancel:function(){S(!0),n(!1)},afterClose:function(){C||e.afterClosing()},footer:[Object(c.jsx)(v.a,{className:"modal-button",loading:O,onClick:function(){return t=e.info.id,f(!0),S(!1),setTimeout((function(){n(!1),f(!1)}),2e3),b.a.delete("/api/v1/images/delete_image",{params:{id:t,referenceId:1}}).then((function(e){var a=Object(N.a)(A);a=a.filter((function(e){return e.imageOwnerId!==t&&2===e.imageReferenceId})),L(a),console.log(a)})).catch((function(e){return console.log(e)})),void b.a.delete("/api/v1/drivers/delete_driver",{params:{id:t}}).then((function(e){var a=Object(N.a)(k);a=a.filter((function(e){return e.id!==t})),F(a),g.a.success({content:"Driver has been Removed"})})).catch((function(e){return console.log(e)}));var t},danger:!0,children:"Remove"})],children:[Object(c.jsxs)("p",{children:[Object(c.jsx)("h4",{children:"ID:"}),e.info.id]}),Object(c.jsxs)("p",{children:[Object(c.jsx)("h4",{children:"Name:"}),e.info.firstName," ",e.info.middleName," ",e.info.lastName]}),Object(c.jsxs)("p",{children:[Object(c.jsx)("h4",{children:"Contact Number:"}),e.info.contactNumber]}),Object(c.jsxs)("p",{children:[Object(c.jsx)("h4",{children:"Address: "}),e.info.address]}),Object(c.jsxs)("p",{children:[Object(c.jsx)("h4",{children:"Email Address: "}),e.info.email]}),Object(c.jsx)("h4",{children:"Uploaded Images: "}),Object(c.jsx)(x.a,{className:"shadow-sm",children:Object(c.jsx)(i.a,{children:A.map((function(e,t){return Object(c.jsxs)(r.a,{md:{span:6},children:[Object(c.jsx)("br",{}),Object(c.jsx)(p.a,{height:100,width:100,src:"/api/v1/images/".concat(e.imagePath?e.imagePath:"logo.png")}),Object(c.jsxs)(i.a,{children:[Object(c.jsx)("br",{}),Object(c.jsx)(v.a,{onClick:function(){return t=e.id,void b.a.delete("/api/v1/images/delete_image",{params:{id:t,referenceId:1}}).then((function(e){var a=Object(N.a)(A);a=a.filter((function(e){return e.id!==t})),L(a),g.a.success({content:"Driver image has been removed"})})).catch((function(e){return console.log(e)}));var t},danger:!0,children:"Delete"})]})]},t)}))})})]})]})},C=(a(151),a(50)),S=a(492);var w=function(e){var t=Object(j.useState)(!1),a=Object(d.a)(t,2),s=a[0],n=a[1],i=Object(j.useState)(!1),r=Object(d.a)(i,2),l=r[0],m=r[1],u=Object(j.useState)(!1),O=Object(d.a)(u,2),f=O[0],h=O[1],x=Object(j.useState)([]),p=Object(d.a)(x,2),N=(p[0],p[1],Object(j.useState)({})),I=Object(d.a)(N,2),y=(I[0],I[1],Object(j.useState)("Choose file")),w=Object(d.a)(y,2),D=(w[0],w[1],Object(j.useState)()),k=Object(d.a)(D,2),F=(k[0],k[1],function(){h(!0),n(!1)}),P=function(t){console.log(t),e.passedData(e.info),m(!0),h(!1),setTimeout((function(){n(!1),m(!1)}),2e3),b.a.post("/api/v1/drivers/add_driver",t).then((function(e){g.a.success({content:"Successfully Added New Driver"})})).catch((function(e){return console.log(e)}))};return Object(c.jsxs)("div",{children:[Object(c.jsxs)(v.a,{type:"primary",className:"modal-button-add",onClick:function(){n(!0)},children:[Object(c.jsxs)("span",{className:"desktop-view",children:[Object(c.jsx)(S.a,{})," Add Driver"]}),Object(c.jsx)("span",{className:"mobile-view",children:Object(c.jsx)(S.a,{})})]}),Object(c.jsx)(g.a,{title:"Add Driver:",visible:s,confirmLoading:l,onOk:P,onCancel:F,afterClose:function(){f||e.afterClosing()},destroyOnClose:!0,footer:[Object(c.jsx)(v.a,{className:"modal-button",onClick:F,children:"Cancel"},"back"),Object(c.jsx)(v.a,{form:"myForm",htmlType:"submit",type:"primary",className:"modal-button",loading:l,onClick:P,children:"Add"},"submit")],children:Object(c.jsxs)(C.a,{layout:"vertical",name:"basic",initialValues:{remember:!0},onFinish:P,onFinishFailed:function(e){g.a.error({content:"Failure to Add New Driver"}),setTimeout((function(){n(!0),m(!1)}),2e3)},id:"myForm",children:[Object(c.jsx)(C.a.Item,{label:"First Name",name:"firstName",rules:[{required:!0,message:"Please input your Firstname!"}],children:Object(c.jsx)(o.a,{})}),Object(c.jsx)(C.a.Item,{label:"Middle Name",name:"middleName",rules:[{required:!0,message:"Please input your Middlename!"}],children:Object(c.jsx)(o.a,{})}),Object(c.jsx)(C.a.Item,{label:"Last Name",name:"lastName",rules:[{required:!0,message:"Please input your Lastname!"}],children:Object(c.jsx)(o.a,{})}),Object(c.jsx)(C.a.Item,{label:"Address",name:"address",rules:[{required:!0,message:"Please input your Address!"}],children:Object(c.jsx)(o.a,{})}),Object(c.jsx)(C.a.Item,{label:"Contact Number",name:"contactNumber",rules:[{required:!0,message:"Please input your Contact Number!"}],children:Object(c.jsx)(o.a,{})}),Object(c.jsx)(C.a.Item,{label:"Generate Password",name:"generatePassword",rules:[{required:!0,message:"Please input your password!"}],children:Object(c.jsx)(o.a,{})}),Object(c.jsx)(C.a.Item,{label:"Email",name:"email",rules:[{required:!0,type:"email",message:"Please input your Email!"}],children:Object(c.jsx)(o.a,{})})]})})]})},D=a(38),k=(a(423),a(422)),F=(a(419),a(424)),P=(a(420),a(155)),q=a(403);var A=function(e){var t=Object(j.useState)({}),a=Object(d.a)(t,2),s=(a[0],a[1],Object(j.useState)(!1)),n=Object(d.a)(s,2),r=(n[0],n[1],Object(j.useState)("Choose file")),o=Object(d.a)(r,2),m=(o[0],o[1]),u=Object(j.useState)(""),O=Object(d.a)(u,2),f=O[0],h=O[1],x=Object(j.useState)("none"),p=Object(d.a)(x,2),N=p[0],I=p[1],y=Object(j.useState)(""),S=Object(d.a)(y,2),w=(S[0],S[1],Object(j.useState)([])),A=Object(d.a)(w,2),L=(A[0],A[1],Object(j.useState)([])),T=Object(d.a)(L,2),_=(T[0],T[1],Object(j.useState)(!1)),E=Object(d.a)(_,2),R=(E[0],E[1]),U=Object(j.useState)(!1),V=Object(d.a)(U,2),M=V[0],z=V[1],J=C.a.useForm(),B=Object(d.a)(J,1)[0],G=Object(j.useState)(!1),H=Object(d.a)(G,2),K=H[0],Q=H[1],W=function(){R(!0),setTimeout((function(){z(!1),Q(!1)}),500)},X={name:"file",action:"/api/v1/images/add_image",headers:{authorization:"authorization-text"},data:{imageOwnerId:e.info.id,imageReferenceId:2},onChange:function(e){"uploading"!==e.file.status&&console.log("uploading",e.file,e.fileList),"done"===e.file.status?P.b.success("".concat(e.file.name," file uploaded Successfully.")):"error"===e.file.status&&P.b.error("".concat(e.file.name," file upload Failed.")),I(e.file.status),m(e)}};return Object(c.jsxs)("div",{children:[Object(c.jsxs)(v.a,{type:"primary",className:"modal-button",onClick:function(){B.setFieldsValue({imageOwnerId:e.info.id,imageReferenceId:2}),h(),I("removed"),m("Choose file"),z(!0),console.log(e.info)},children:[Object(c.jsxs)("span",{className:"desktop-view",children:[Object(c.jsx)(q.a,{})," Upload"]}),Object(c.jsx)("span",{className:"mobile-view",children:Object(c.jsx)(q.a,{})})]}),Object(c.jsxs)(g.a,{title:"Driver Image Upload",confirmLoading:K,visible:M,onOk:function(t){"done"==N?b.a.post("/api/v1/images/save_image",{imageOwnerId:e.info.id,imageReferenceId:2,imagePath:f}).then((function(e){P.b.success("Successfully Saved"),setTimeout((function(){z(!1),Q(!1)}),500),h("")})).catch((function(e){return console.log(e)})):P.b.error("Image Saving Error")},onCancel:W,afterClose:function(){Q(!0),R(!1)},destroyOnClose:!0,footer:[Object(c.jsx)(v.a,{className:"modal-button",type:"danger",onClick:W,children:"Close"},"back")],children:[Object(c.jsxs)(F.b,{itemLayout:"vertical",children:[Object(c.jsxs)(F.b.Item,{children:[Object(c.jsx)("h4",{children:"Image Driver ID: "}),e.info.id]}),Object(c.jsxs)(F.b.Item,{children:[Object(c.jsx)("h4",{children:"Image Driver Name: "}),e.info.firstName," ",e.info.firstName," ",e.info.firstName]}),Object(c.jsxs)(F.b.Item,{children:[Object(c.jsx)("h4",{children:"Image Reference Name: "}),"Driver"]})]}),Object(c.jsx)(i.a,{children:Object(c.jsx)(l.b,{style:{width:"100%"},size:"large",children:Object(c.jsx)(k.a,Object(D.a)(Object(D.a)({},X),{},{onRemove:function(e){b.a.delete("/api/v1/images/delete_folder_image",{params:{fileName:e.response.imagePath,fileId:e.response.id}}).then((function(e){I("removed")})).catch((function(e){return console.log(e)})),h(),P.b.error("File removed Successfully.")},listType:"picture-card",showUploadList:{showPreviewIcon:!1},maxCount:5,children:Object(c.jsxs)(l.b,{children:[Object(c.jsx)(q.a,{}),"Upload"]})}))})})]})]})},L=a(493);var T=function(e){var t=Object(j.useState)(!1),a=Object(d.a)(t,2),s=a[0],n=a[1],i=C.a.useForm(),r=Object(d.a)(i,1)[0],l=Object(j.useState)(!1),m=Object(d.a)(l,2),u=m[0],O=m[1],f=Object(j.useState)(!1),h=Object(d.a)(f,2),x=h[0],p=h[1],N=Object(j.useState)(),I=Object(d.a)(N,2),y=I[0],S=I[1],w=function(){p(!0),n(!1)},D=function(t){O(!0),p(!1),e.passedData(e.info),b.a.post("/api/v1/drivers/update_driver",{id:t.id,firstName:t.firstName,middleName:t.middleName,lastName:t.lastName,address:t.address,contactNumber:t.contactNumber,email:t.email}).then((function(e){setTimeout((function(){n(!1),O(!1)}),2e3),y?g.a.success({content:"Successfully Updated Driver Info"}):g.a.success({content:"Driver Info is up to date"})})).catch((function(e){return console.log(e)}))};return Object(c.jsxs)("div",{children:[Object(c.jsxs)(v.a,{type:"primary",className:"modal-button",onClick:function(){r.setFieldsValue({id:e.info.id,firstName:e.info.firstName,middleName:e.info.middleName,lastName:e.info.lastName,address:e.info.address,contactNumber:e.info.contactNumber,email:e.info.email}),n(!0),S(!1)},children:[Object(c.jsxs)("span",{className:"desktop-view",children:[Object(c.jsx)(L.a,{})," Edit"]}),Object(c.jsx)("span",{className:"mobile-view",children:Object(c.jsx)(L.a,{})})]}),Object(c.jsx)(g.a,{title:"Update Driver Info",confirmLoading:u,visible:s,onOk:D,onCancel:w,afterClose:function(){x||e.afterClosing()},destroyOnClose:!0,footer:[Object(c.jsx)(v.a,{className:"modal-button",onClick:w,children:"Cancel"},"back"),Object(c.jsx)(v.a,{form:"myForm",className:"modal-button",htmlType:"submit",type:"primary",children:"Update"})],children:Object(c.jsxs)(C.a,{layout:"vertical",name:"basic",form:r,initialValues:{remember:!0},onFinish:D,onFinishFailed:function(e){g.a.error({content:"Failure to Update Driver Info"}),setTimeout((function(){n(!0),O(!1)}),2e3)},onValuesChange:function(e,t){S(!0)},id:"myForm",children:[Object(c.jsx)(C.a.Item,{label:"Driver ID:",name:"id",children:Object(c.jsx)(o.a,{disabled:!0,bordered:!1})}),Object(c.jsx)(C.a.Item,{label:"Firstname:",name:"firstName",rules:[{required:!0,message:"Please input Firstname!"}],children:Object(c.jsx)(o.a,{})}),Object(c.jsx)(C.a.Item,{label:"Middlename:",name:"middleName",rules:[{required:!0,message:"Please input Middlename!"}],children:Object(c.jsx)(o.a,{})}),Object(c.jsx)(C.a.Item,{label:"Lastname:",name:"lastName",rules:[{required:!0,message:"Please input Lastname!"}],children:Object(c.jsx)(o.a,{})}),Object(c.jsx)(C.a.Item,{label:"Contact:",name:"contactNumber",rules:[{required:!0,message:"Please input Contact Number!"}],children:Object(c.jsx)(o.a,{})}),Object(c.jsx)(C.a.Item,{label:"Address:",name:"address",rules:[{required:!0,message:"Please input the Address!"}],children:Object(c.jsx)(o.a,{})}),Object(c.jsx)(C.a.Item,{label:"Email:",name:"email",rules:[{required:!0,message:"Please input Email!"}],children:Object(c.jsx)(o.a,{})})]})})]})};t.default=function(){var e=Object(j.useState)([]),t=Object(d.a)(e,2),a=t[0],m=t[1],u=o.a.Search,f=Object(j.useState)(""),x=Object(d.a)(f,2),p=x[0],v=x[1];Object(j.useEffect)((function(){b.a.get("/api/v1/drivers/").then((function(e){var t=e.data;m(t)})).catch((function(e){return console.log(e)}))}),[]);var g=function(){console.log("Passed data from modal",p),b.a.get("/api/v1/drivers/").then((function(e){var t=e.data;m(t)}))};return Object(c.jsxs)("div",{children:[Object(c.jsxs)(i.a,{justify:"space-between",children:[Object(c.jsx)(r.a,{span:4,children:Object(c.jsx)(l.b,{direction:"vertical",children:Object(c.jsx)(u,{placeholder:"Search Drivers",onSearch:function(e){b.a.post("/api/v1/drivers/search_drivers",{value:e}).then((function(e){console.log(e);var t=e.data;m(t)}))},allowClear:!0,enterButton:!0})})}),Object(c.jsx)(r.a,{span:4,children:Object(c.jsx)(w,{info:"",passedData:v,afterClosing:g})})]}),Object(c.jsx)(n.a,{orientation:"center",children:"List of Drivers"}),Object(c.jsx)(i.a,{children:Object(c.jsxs)(s.a,{dataSource:a,scroll:{x:1e3,y:500},sticky:!0,children:[Object(c.jsx)(O.a,{title:"Firstname",dataIndex:"firstName"},"firstName"),Object(c.jsx)(O.a,{title:"Middlename",dataIndex:"middleName"},"middleName"),Object(c.jsx)(O.a,{title:"Lastname",dataIndex:"lastName"},"lastName"),Object(c.jsx)(h.a,{title:"Contact",dataIndex:"contactNumber"},"contactNumber"),Object(c.jsx)(h.a,{title:"Address",dataIndex:"address"},"address"),Object(c.jsx)(h.a,{title:"Email",dataIndex:"email"},"email"),Object(c.jsx)(h.a,{title:"Actions",fixed:"right",width:"35vh",render:function(e){return Object(c.jsxs)(l.b,{children:[Object(c.jsx)(y,{info:e,passedData:v,afterClosing:g}),Object(c.jsx)(T,{info:e,passedData:v,afterClosing:g}),Object(c.jsx)(A,{info:e})]})}},"actions")]})})]})}}}]);
//# sourceMappingURL=9.168b42b8.chunk.js.map