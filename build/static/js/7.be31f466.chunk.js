(this["webpackJsonpretrack-admin"]=this["webpackJsonpretrack-admin"]||[]).push([[7],{470:function(e,t,a){"use strict";a.r(t);a(410);var n=a(408),c=(a(404),a(405)),i=(a(123),a(58)),r=a(5),s=(a(125),a(44)),o=(a(400),a(401)),d=(a(124),a(60)),l=a(100),j=a(0),u=a(88),b=a.n(u),m=a(406),O=a.n(m),f=a(407),h=a.n(f),x=(a(146),a(104)),v=(a(209),a(145)),p=(a(99),a(64)),g=(a(398),a(399)),N=a(403);var y=function(e){var t=Object(j.useState)(!1),a=Object(l.a)(t,2),n=a[0],c=a[1],o=Object(j.useState)(""),d=Object(l.a)(o,2),u=(d[0],d[1],Object(j.useState)(!1)),m=Object(l.a)(u,2),O=m[0],f=m[1],h=Object(j.useState)(!1),y=Object(l.a)(h,2),C=y[0],I=y[1],S=Object(j.useState)([]),D=Object(l.a)(S,2),k=D[0],w=D[1],P=Object(j.useState)([]),A=Object(l.a)(P,2),F=A[0],q=A[1],L=Object(j.useState)([]),E=Object(l.a)(L,2),T=(E[0],E[1]);return Object(r.jsxs)("div",{children:[Object(r.jsx)(p.a,{type:"primary",onClick:function(){c(!0),b.a.get("/api/v1/images/").then((function(t){var a=Object(N.a)(F);a=a.find((function(t){return t.imageOwnerId===e.info.id&&2===t.imageReferenceId})),T(a.imagePath)})).catch((function(e){return console.log(e)}))},children:"View"}),Object(r.jsxs)(g.a,{title:"Driver Information",visible:n,confirmLoading:O,onOk:function(){e.passedData(e.info),f(!0),I(!1),setTimeout((function(){c(!1),f(!1)}),2e3)},onCancel:function(){I(!0),c(!1)},afterClose:function(){C||e.afterClosing()},footer:[Object(r.jsx)(p.a,{loading:O,onClick:function(){return t=e.info.id,f(!0),I(!1),setTimeout((function(){c(!1),f(!1)}),2e3),b.a.delete("/api/v1/images/delete_image",{params:{id:t,referenceId:1}}).then((function(e){var a=Object(N.a)(F);a=a.filter((function(e){return e.imageOwnerId!==t&&2===e.imageReferenceId})),q(a),console.log(a)})).catch((function(e){return console.log(e)})),void b.a.delete("/api/v1/drivers/delete_driver",{params:{id:t}}).then((function(e){var a=Object(N.a)(k);a=a.filter((function(e){return e.id!==t})),w(a),g.a.success({content:"Driver has been Removed"})})).catch((function(e){return console.log(e)}));var t},danger:!0,children:"Remove"})],children:[Object(r.jsxs)("p",{children:[Object(r.jsx)("h3",{children:"ID:"}),e.info.id]}),Object(r.jsxs)("p",{children:[Object(r.jsx)("h3",{children:"Name:"}),e.info.firstName," ",e.info.middleName," ",e.info.lastName]}),Object(r.jsxs)("p",{children:[Object(r.jsx)("h3",{children:"Contact Number:"}),e.info.contactNumber]}),Object(r.jsxs)("p",{children:[Object(r.jsx)("h3",{children:"Address: "}),e.info.address]}),Object(r.jsxs)("p",{children:[Object(r.jsx)("h3",{children:"Email Address: "}),e.info.email]}),Object(r.jsx)("h3",{children:"Uploaded Images: "}),Object(r.jsx)(x.a,{className:"shadow-sm",children:F.map((function(e,t){return Object(r.jsx)(s.a,{md:{span:6},children:Object(r.jsxs)(i.a,{children:[Object(r.jsx)(v.a,{height:100,src:"/api/v1/images/".concat(e.imagePath?e.imagePath:"logo.png"),style:{borderColor:"white",border:"10px"}}),Object(r.jsx)(p.a,{onClick:function(){return t=e.id,void b.a.delete("/api/v1/images/delete_image",{params:{id:t,referenceId:1}}).then((function(e){var a=Object(N.a)(F);a=a.filter((function(e){return e.id!==t})),q(a),g.a.success({content:"Driver image has been removed"})})).catch((function(e){return console.log(e)}));var t},danger:!0,children:"Delete"})]})},t)}))})]})]})},C=(a(144),a(48));var I=function(e){var t=Object(j.useState)(!1),a=Object(l.a)(t,2),n=a[0],c=a[1],i=Object(j.useState)(!1),s=Object(l.a)(i,2),o=s[0],u=s[1],m=Object(j.useState)(!1),O=Object(l.a)(m,2),f=O[0],h=O[1],x=Object(j.useState)([]),v=Object(l.a)(x,2),N=(v[0],v[1],Object(j.useState)({})),y=Object(l.a)(N,2),I=(y[0],y[1],Object(j.useState)("Choose file")),S=Object(l.a)(I,2),D=(S[0],S[1],Object(j.useState)()),k=Object(l.a)(D,2),w=(k[0],k[1],function(){h(!0),c(!1)}),P=function(t){console.log(t),e.passedData(e.info),u(!0),h(!1),setTimeout((function(){c(!1),u(!1)}),2e3),b.a.post("/api/v1/drivers/add_driver",t).then((function(e){g.a.success({content:"Successfully Added New Driver"})})).catch((function(e){return console.log(e)}))};return Object(r.jsxs)("div",{children:[Object(r.jsx)(p.a,{type:"primary",onClick:function(){c(!0)},children:"Add Driver"}),Object(r.jsx)(g.a,{title:"Add Driver:",visible:n,confirmLoading:o,onOk:P,onCancel:w,afterClose:function(){f||e.afterClosing()},destroyOnClose:!0,footer:[Object(r.jsx)(p.a,{onClick:w,children:"Cancel"},"back"),Object(r.jsx)(p.a,{form:"myForm",htmlType:"submit",type:"primary",loading:o,onClick:P,children:"Add"},"submit")],children:Object(r.jsxs)(C.a,{layout:"vertical",name:"basic",initialValues:{remember:!0},onFinish:P,onFinishFailed:function(e){g.a.error({content:"Failure to Add New Driver"}),setTimeout((function(){c(!0),u(!1)}),2e3)},id:"myForm",children:[Object(r.jsx)(C.a.Item,{label:"First Name",name:"firstName",rules:[{required:!0,message:"Please input your Firstname!"}],children:Object(r.jsx)(d.a,{})}),Object(r.jsx)(C.a.Item,{label:"Middle Name",name:"middleName",rules:[{required:!0,message:"Please input your Middlename!"}],children:Object(r.jsx)(d.a,{})}),Object(r.jsx)(C.a.Item,{label:"Last Name",name:"lastName",rules:[{required:!0,message:"Please input your Lastname!"}],children:Object(r.jsx)(d.a,{})}),Object(r.jsx)(C.a.Item,{label:"Address",name:"address",rules:[{required:!0,message:"Please input your Address!"}],children:Object(r.jsx)(d.a,{})}),Object(r.jsx)(C.a.Item,{label:"Contact Number",name:"contactNumber",rules:[{required:!0,message:"Please input your Contact Number!"}],children:Object(r.jsx)(d.a,{})}),Object(r.jsx)(C.a.Item,{label:"Generate Password",name:"generatePassword",rules:[{required:!0,message:"Please input your password!"}],children:Object(r.jsx)(d.a,{})}),Object(r.jsx)(C.a.Item,{label:"Email",name:"email",rules:[{required:!0,type:"email",message:"Please input your Email!"}],children:Object(r.jsx)(d.a,{})})]})})]})};t.default=function(){var e=Object(j.useState)([]),t=Object(l.a)(e,2),a=t[0],u=t[1],m=d.a.Search,f=Object(j.useState)(""),x=Object(l.a)(f,2),v=x[0],p=x[1];Object(j.useEffect)((function(){b.a.get("/api/v1/drivers/").then((function(e){var t=e.data;u(t)})).catch((function(e){return console.log(e)}))}),[]);var g=function(){console.log("Passed data from modal",v),b.a.get("/api/v1/drivers/").then((function(e){var t=e.data;u(t)}))};return Object(r.jsxs)("div",{children:[Object(r.jsxs)(i.a,{justify:"space-between",children:[Object(r.jsx)(s.a,{span:4,children:Object(r.jsx)(o.b,{direction:"vertical",children:Object(r.jsx)(m,{placeholder:"Search Drivers",onSearch:function(e){b.a.post("/api/v1/drivers/search_drivers",{value:e}).then((function(e){console.log(e);var t=e.data;u(t)}))},allowClear:!0,enterButton:!0})})}),Object(r.jsx)(s.a,{span:4,children:Object(r.jsx)(I,{info:"",passedData:p,afterClosing:g})})]}),Object(r.jsx)(c.a,{orientation:"center",children:"List of Drivers"}),Object(r.jsx)(i.a,{children:Object(r.jsxs)(n.a,{dataSource:a,scroll:{x:1e3,y:500},sticky:!0,children:[Object(r.jsx)(O.a,{title:"Firstname",dataIndex:"firstName"},"firstName"),Object(r.jsx)(O.a,{title:"Middlename",dataIndex:"middleName"},"middleName"),Object(r.jsx)(O.a,{title:"Lastname",dataIndex:"lastName"},"lastName"),Object(r.jsx)(h.a,{title:"Contact",dataIndex:"contactNumber"},"contactNumber"),Object(r.jsx)(h.a,{title:"Address",dataIndex:"address"},"address"),Object(r.jsx)(h.a,{title:"Email",dataIndex:"email"},"email"),Object(r.jsx)(h.a,{title:"Actions",fixed:"right",render:function(e){return Object(r.jsx)(o.b,{children:Object(r.jsx)(y,{info:e,passedData:p,afterClosing:g})})}},"actions")]})})]})}}}]);
//# sourceMappingURL=7.be31f466.chunk.js.map